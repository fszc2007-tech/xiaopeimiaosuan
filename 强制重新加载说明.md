# 🔥 强制重新加载应用（Xcode 构建）

## 问题

错误日志显示 baseURL 还是 `http://localhost:3000`，说明代码更新没有生效。

## 原因

虽然代码已经更新为 `http://10.89.148.75:3000`，但 iPhone 上运行的是旧的 JavaScript bundle。

## ✅ 解决方案

### 方法 1：在 iPhone 上强制重新加载（推荐）

1. **摇动 iPhone** 打开开发菜单
2. 选择 **"Reload"** 或按 **Cmd + R**（如果连接了 Mac）
3. 等待应用重新加载

### 方法 2：清除 Metro 缓存并重新加载

在终端运行：

```bash
cd /Users/gaoxuxu/Desktop/xiaopei-app/app

# 停止 Metro bundler
pkill -f "expo\|metro"

# 清除缓存
rm -rf .expo node_modules/.cache

# 重新启动
npx expo start --clear --lan
```

然后在 iPhone 上：
1. 摇动设备 → 选择 "Reload"

### 方法 3：在 Xcode 中重新构建（如果方法 1 和 2 都不行）

1. 打开 Xcode
2. 选择 Product → Clean Build Folder (Shift + Cmd + K)
3. 重新构建并运行到设备

## 🔍 验证修复

重新加载后，在控制台应该看到：

```
[apiClient] 🔗 创建 axios 实例，baseURL: http://10.89.148.75:3000
[ENV Config] 🔗 当前 API Base URL: http://10.89.148.75:3000
```

**不应该**再看到 `localhost:3000`。

## ⚠️ 如果还是 localhost

如果重新加载后还是显示 `localhost:3000`，可能是：

1. **Metro bundler 缓存问题**：
   ```bash
   cd /Users/gaoxuxu/Desktop/xiaopei-app/app
   rm -rf .expo node_modules/.cache
   npx expo start --clear --lan
   ```

2. **环境变量问题**：
   检查是否有 `.env` 文件设置了 `EXPO_PUBLIC_API_BASE_URL=http://localhost:3000`

3. **需要完全重新构建**：
   在 Xcode 中 Clean Build Folder 并重新构建

---

**当前配置**：
- 代码中的默认值：`http://10.89.148.75:3000` ✅
- 需要重新加载应用才能生效





