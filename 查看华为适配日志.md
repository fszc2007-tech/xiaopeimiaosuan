# æŸ¥çœ‹åä¸ºé€‚é…æ—¥å¿—æŒ‡å—

## ğŸ“Š å½“å‰çŠ¶æ€

**è°ƒè¯•æ—¥å¿—æ–‡ä»¶**: `.cursor/debug.log`

**å‘ç°**ï¼š
- âœ… è°ƒè¯•æ—¥å¿—æ–‡ä»¶å­˜åœ¨
- âŒ æ²¡æœ‰æ‰¾åˆ° `GoogleLoginSheet` çš„åä¸ºé€‚é…è°ƒè¯•ä¿¡æ¯
- âœ… ä»£ç ä¸­å·²æ·»åŠ è°ƒè¯•æ—¥å¿—ï¼ˆ`GoogleLoginSheet.tsx:44-50`ï¼‰

## ğŸ” å¯èƒ½çš„åŸå› 

1. **ä»£ç å·²ä¿®æ”¹ä½†æœªé‡æ–°æ„å»º**
   - å¦‚æœä»£ç å·²ä¿®æ”¹ä½† APK è¿˜æ²¡æœ‰é‡æ–°æ„å»ºï¼Œè°ƒè¯•æ—¥å¿—ä¸ä¼šå‡ºç°
   - éœ€è¦é‡æ–°æ„å»º APK æ‰èƒ½çœ‹åˆ°æ–°çš„è°ƒè¯•ä¿¡æ¯

2. **å¼¹çª—è¿˜æ²¡æœ‰è¢«æ‰“å¼€**
   - è°ƒè¯•æ—¥å¿—åªåœ¨å¼¹çª—æ˜¾ç¤ºæ—¶ï¼ˆ`visible === true`ï¼‰æ‰ä¼šè®°å½•
   - éœ€è¦åœ¨æ‰‹æœºä¸Šæ‰“å¼€ Google ç™»å½•å¼¹çª—

3. **è°ƒè¯•æ—¥å¿—å‘é€å¤±è´¥**
   - è°ƒè¯•æ—¥å¿—é€šè¿‡ HTTP POST å‘é€åˆ° `http://127.0.0.1:7243/ingest/...`
   - å¦‚æœç½‘ç»œä¸é€šæˆ–æœåŠ¡å™¨æœªè¿è¡Œï¼Œæ—¥å¿—å¯èƒ½æ— æ³•è®°å½•

## ğŸ“ æŸ¥çœ‹æ—¥å¿—çš„æ–¹æ³•

### æ–¹æ³• 1: æŸ¥çœ‹è°ƒè¯•æ—¥å¿—æ–‡ä»¶

```bash
# æŸ¥çœ‹æ‰€æœ‰ GoogleLoginSheet ç›¸å…³æ—¥å¿—
cat .cursor/debug.log | grep -i "GoogleLoginSheet\|Huawei\|insets\|sheetHeight"

# æŸ¥çœ‹æœ€å 50 è¡Œ
tail -50 .cursor/debug.log
```

### æ–¹æ³• 2: ä½¿ç”¨ adb logcat æŸ¥çœ‹

```bash
# æ¸…ç©ºæ—¥å¿—
adb logcat -c

# åœ¨æ‰‹æœºä¸Šæ‰“å¼€ Google ç™»å½•å¼¹çª—

# æŸ¥çœ‹æ—¥å¿—
adb logcat -d | grep -i "GoogleLoginSheet\|Huawei\|insets\|sheetHeight"
```

### æ–¹æ³• 3: å®æ—¶ç›‘æ§

```bash
# æ¸…ç©ºæ—¥å¿—
adb logcat -c

# å®æ—¶ç›‘æ§ï¼ˆæŒ‰ Ctrl+C åœæ­¢ï¼‰
adb logcat | grep -E "GoogleLoginSheet|Huawei|insets|sheetHeight|screenHeight|paddingBottom"
```

## ğŸ” é¢„æœŸçš„è°ƒè¯•ä¿¡æ¯

å½“å¼¹çª—æ‰“å¼€æ—¶ï¼Œåº”è¯¥çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„è°ƒè¯•ä¿¡æ¯ï¼š

```json
{
  "location": "GoogleLoginSheet:useEffect",
  "message": "Huawei adaptation debug",
  "data": {
    "screenHeight": 2340,
    "insetsBottom": 48,
    "insetsTop": 0,
    "insetsLeft": 0,
    "insetsRight": 0,
    "maxSheetHeight": 1170,
    "baseHeight": 1053,
    "minSheetHeight": 702,
    "calculatedHeight": 1122,
    "sheetHeight": 1053,
    "paddingBottom": 48
  }
}
```

## âš ï¸ å…³é”®æŒ‡æ ‡

éœ€è¦ç‰¹åˆ«å…³æ³¨ä»¥ä¸‹å€¼ï¼š

1. **`insetsBottom`**: åä¸º Mate 40 çš„åº•éƒ¨å¯¼èˆªæ é«˜åº¦
   - æ­£å¸¸å€¼ï¼š48-60px
   - å¦‚æœä¸º 0ï¼Œè¯´æ˜ SafeAreaInsets è·å–å¤±è´¥

2. **`sheetHeight`**: è®¡ç®—åçš„å¼¹çª—é«˜åº¦
   - åº”è¯¥è€ƒè™‘äº† `insets.bottom`
   - ä¸åº”è¯¥è¶…è¿‡å±å¹•çš„ 50%

3. **`paddingBottom`**: å†…å®¹åŒºåŸŸçš„åº•éƒ¨å†…è¾¹è·
   - åº”è¯¥è‡³å°‘ç­‰äº `insets.bottom`
   - ç¡®ä¿å†…å®¹ä¸è¢«åº•éƒ¨å¯¼èˆªæ é®æŒ¡

## ğŸš€ ä¸‹ä¸€æ­¥

1. **å¦‚æœä»£ç å·²ä¿®æ”¹ä½†æœªæ„å»º**ï¼š
   - éœ€è¦é‡æ–°æ„å»º APK
   - ä½¿ç”¨ `eas build --platform android --profile production`

2. **å¦‚æœå·²æ„å»ºä½†æœªæµ‹è¯•**ï¼š
   - åœ¨æ‰‹æœºä¸Šæ‰“å¼€ Google ç™»å½•å¼¹çª—
   - æŸ¥çœ‹è°ƒè¯•æ—¥å¿—
   - åˆ†æ `insetsBottom` å’Œ `sheetHeight` çš„å€¼

3. **å¦‚æœè°ƒè¯•æ—¥å¿—æ˜¾ç¤º `insetsBottom` ä¸º 0**ï¼š
   - è¯´æ˜ SafeAreaInsets è·å–å¤±è´¥
   - éœ€è¦æ£€æŸ¥ SafeAreaProvider é…ç½®
   - å¯èƒ½éœ€è¦ä½¿ç”¨å…¶ä»–æ–¹æ³•è·å–å®‰å…¨åŒºåŸŸ

