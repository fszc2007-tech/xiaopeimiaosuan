# 基本信息设计文档

## 页面概述

### 页面名称
基本信息 / Basic Info Tab / 命盤基本信息

### 页面定位
- **页面类型**: 命盤详情页的子 Tab
- **用户类型**: 所有用户
- **页面层级**: 命盤详情页的第一个 Tab
- **访问条件**: 用户完成排盤后进入

### 页面目的
展示命盤的统计和概览信息，包括命盤檔案、日主概覽、五行分佈统计、含藏干统计、身強身弱參考、喜忌用神等核心信息。**仅展示统计和概览，详细结构表格放在「命盤總覽」Tab**。

---

## 功能需求

### 2.1 核心功能

#### 2.1.1 命盤檔案展示
- 展示用户的基本信息和命盤相关数据
- 包含姓名、性别、生肖、公曆、農曆、真太陽時、出生地点等

#### 2.1.2 日主概覽
- 展示日主的性格/气质描述
- 提供 AI 生成的个性化解读

#### 2.1.3 五行分佈统计
- 展示全盤五行统计（仅统计，不展示详细表格）
- 横向条形图展示五行分布
- 简要统计说明

#### 2.1.4 含藏干统计
- 展示藏干总数和五行分布统计
- 简单可视化展示

#### 2.1.5 身強身弱參考
- 展示身強身弱评分（0-100）
- 可视化进度条展示

#### 2.1.6 喜忌用神
- 展示喜忌用神的优先级
- 可视化展示五行喜忌关系

---

## 页面设计

### 3.1 整体布局

页面采用垂直滚动布局（ScrollView），整体背景为纯白色。从上到下依次包含以下区块：

1. 命盤檔案（Profile File）
2. 日主概覽（Day Master Overview）
3. 五行分佈（统计版）（Five Element Stat）
4. 含藏干统计（Hidden Stem Stat）
5. 身強身弱參考（Body Strength Reference）
6. 喜忌用神（Yong Shen Summary）

---

### 3.2 顶部 Tab 结构

**Tab 结构**:
- 固定 3 个 Tab：
  - `basicInfo` - 基本信息（当前页面）
  - `chartOverview` - 命盤總覽（详细结构）
  - `luckTimeline` - 大運流年

**Tab 样式**:
- 背景: `colors.bg`（白色）
- 选中 Tab 文字颜色: `colors.ink`
- 未选中 Tab 文字颜色: `colors.textSecondary`
- 选中 Tab 底部高亮条: `colors.brandBlue`，高度 2px
- Tab 之间间距: `spacing.md`

---

### 3.3 详细区块设计

#### 3.3.1 命盤檔案（Profile File）

**位置**: 页面最顶部（Tab 下方）

**卡片样式**:
- 背景: `colors.cardBg`（白色）
- 圆角: `radius.lg`
- 边框: `colors.border`（细线）
- 阴影: `shadows.card`
- 内边距: `spacing.lg`
- 上下间距: `spacing.lg`

**标题**:
- 文案: 「命盤檔案」
- 字体大小: `fontSizes.lg`
- 字体粗细: `fontWeights.semibold`
- 文字颜色: `colors.ink`
- 底部间距: `spacing.md`

**字段展示**（建议顺序）:

采用两列布局或单列布局，每个字段一行：

| 字段 | 标签 | 值 | 样式说明 |
|------|------|-----|---------|
| 姓名 | `name` | 用户姓名 | 标签: `colors.textSecondary`，值: `colors.ink` |
| 性別 | `gender` | 男/女 | 同上 |
| 生肖 | `zodiacAnimal` | 生肖名称 | 同上 |
| 公曆 | `gregorian` | 日期字符串 | 同上 |
| 農曆 | `lunar` | 日期字符串 | 同上 |
| 真太陽時 | `trueSolar` | 日期时间字符串 | 无则留空或不显示 |
| 出生地點 | `birthPlace` | 城市名称 | 同上 |
| 星座 | `westernZodiac` | 星座名称 | 同上 |
| 空亡（年日） | `kongWangYearDay` | 空亡信息 | 同上 |
| 起大運 | `startLuckDesc` | 大運描述 | 同上 |

**字段样式**:
- 标签文字:
  - 字体大小: `fontSizes.sm`
  - 字体粗细: `fontWeights.regular`
  - 文字颜色: `colors.textSecondary`
  - 宽度: 约 80px（固定宽度，对齐）
  
- 值文字:
  - 字体大小: `fontSizes.base`
  - 字体粗细: `fontWeights.regular`
  - 文字颜色: `colors.ink`
  - 左对齐

**布局**:
- 字段之间间距: `spacing.sm`
- 字段行高: `lineHeights.normal`
- 采用两列布局（标签 | 值）或单列布局

**数据结构**:
```typescript
interface BaziProfileFile {
  name: string;
  gender: 'male' | 'female';
  zodiacAnimal: string;
  gregorian: string;
  lunar: string;
  trueSolar: string; // 无则留空
  birthPlace: string;
  westernZodiac: string;
  kongWangYearDay: string;
  startLuckDesc: string;
}
```

---

#### 3.3.2 日主概覽（Day Master Overview）

**位置**: 命盤檔案下方

**卡片样式**:
- 背景: `colors.cardBg`（白色）
- 圆角: `radius.lg`
- 边框: `colors.border`（细线）
- 阴影: `shadows.card`
- 内边距: `spacing.lg`
- 上下间距: `spacing.lg`

**标题**:
- 文案: 「日主概覽」
- 字体大小: `fontSizes.lg`
- 字体粗细: `fontWeights.semibold`
- 文字颜色: `colors.ink`
- 底部间距: `spacing.xs`

**副标题**:
- 文案: 「關於你的日主，小佩這樣看」
- 字体大小: `fontSizes.sm`
- 字体粗细: `fontWeights.regular`
- 文字颜色: `colors.textSecondary`
- 底部间距: `spacing.md`

**内容**:
- **日主标识**:
  - 显示日主天干（如「庚」）
  - 字体大小: `fontSizes['2xl']`
  - 字体粗细: `fontWeights.bold`
  - 文字颜色: `colors.brandBlue`
  - 背景: `colors.blueSoftBg`
  - 圆角: `radius.full`
  - 尺寸: 48x48px（圆形）
  - 居中显示
  - 底部间距: `spacing.md`

- **描述文案**:
  - 一段 100–150 字左右的性格/氣質描述
  - 字体大小: `fontSizes.base`
  - 字体粗细: `fontWeights.regular`
  - 文字颜色: `colors.ink`
  - 行高: `lineHeights.relaxed`
  - 底部间距: `spacing.sm`

- **免责说明**（可选）:
  - 文案: 「以上内容仅供参考，命理分析需结合实际情况。」
  - 字体大小: `fontSizes.xs`
  - 字体粗细: `fontWeights.regular`
  - 文字颜色: `colors.textSecondary`
  - 字体样式: 斜体（可选）

**数据结构**:
```typescript
interface DayMasterOverview {
  dayStem: string;        // 日主天干，如 '庚'
  strengthLevel: number;  // 0~100，與 bodyStrength.score 對齊
  text: string;           // 日主概覽文案（LLM）
  disclaimer?: string;    // 可選
}
```

---

#### 3.3.3 五行分佈（统计版）

**位置**: 日主概覽下方

**卡片样式**:
- 背景: `colors.cardBg`（白色）
- 圆角: `radius.lg`
- 边框: `colors.border`（细线）
- 阴影: `shadows.card`
- 内边距: `spacing.lg`
- 上下间距: `spacing.lg`

**标题**:
- 文案: 「五行分佈」
- 字体大小: `fontSizes.lg`
- 字体粗细: `fontWeights.semibold`
- 文字颜色: `colors.ink`
- 底部间距: `spacing.md`

**设计思路**:
- 只做「全盤五行統計 + 核心十神統計」，**不展示四柱表格**
- 形式類似陳摶的「五行個數」，一組條形圖 + 右側簡短文字

**展示内容**:

横向条形图列表，按 **金 / 木 / 水 / 火 / 土** 固定顺序：

**每个五行项目**:

```
┌─────────────────────────────────────────┐
│ 金  [████████████░░░░░░░░]  5 個        │
│     [5個比劫 0個財星 1個官殺 3個印]     │
├─────────────────────────────────────────┤
│ 木  [████░░░░░░░░░░░░░░░░]  2 個        │
│     [1個比劫 1個財星 0個官殺 0個印]     │
├─────────────────────────────────────────┤
│ 水  [████████████████████]  8 個        │
│     [2個比劫 3個財星 1個官殺 2個印]     │
├─────────────────────────────────────────┤
│ 火  [████████░░░░░░░░░░░░]  4 個        │
│     [0個比劫 2個財星 1個官殺 1個印]     │
├─────────────────────────────────────────┤
│ 土  [████████████████░░░░]  6 個        │
│     [1個比劫 2個財星 2個官殺 1個印]     │
└─────────────────────────────────────────┘
```

**每个五行项目样式**:

1. **五行名称**（左侧）:
   - 文案: 「金」「木」「水」「火」「土」
   - 字体大小: `fontSizes.base`
   - 字体粗细: `fontWeights.semibold`
   - 文字颜色: `colors.ink`
   - 宽度: 约 32px（固定宽度）

2. **条形图**（中间）:
   - 背景: `colors.disabledBg`（浅灰色）
   - 填充色: 根据五行使用不同颜色
     - 金: `#FFD700`（金色）或 `colors.brandOrange`
     - 木: `#32CD32`（绿色）或 `colors.brandGreen`
     - 水: `#1E90FF`（蓝色）或 `colors.brandBlue`
     - 火: `#FF4500`（红色）或 `colors.brandOrange`
     - 土: `#8B4513`（棕色）或 `colors.textSecondary`
   - 高度: 24px
   - 圆角: `radius.sm`
   - 宽度: 根据 `count / totalCount` 计算百分比
   - 最小宽度: 4px（即使为 0 也显示一小段）

3. **统计文字**（右侧）:
   - 主统计: 「5 個」
     - 字体大小: `fontSizes.base`
     - 字体粗细: `fontWeights.semibold`
     - 文字颜色: `colors.ink`
   - 详细统计（可选）: 「5個比劫 0個財星 1個官殺 3個印」
     - 字体大小: `fontSizes.xs`
     - 字体粗细: `fontWeights.regular`
     - 文字颜色: `colors.textSecondary`
     - 显示在下一行

**布局**:
- 五行项目之间间距: `spacing.md`
- 每个项目内部: 五行名称、条形图、统计文字水平排列
- 条形图占据剩余空间（flex: 1）
- 详细统计文字显示在条形图下方（可选）

**数据结构**:
```typescript
type WuXingElement = '金' | '木' | '水' | '火' | '土';

interface FiveElementStatItem {
  element: WuXingElement; // 五行
  count: number;          // 該五行總數（含藏干或不含，由後端統一定義）
  desc?: string;          // 可選：一句簡短說明，如 '5個比劫 0個財星 1個官殺 3個印'
}

interface FiveElementStat {
  totalCount: number;            // 全盤計入的總數，用於計算百分比
  items: FiveElementStatItem[];  // 按固定順序排好（金木水火土）
}
```

> 注意：詳細「每柱哪裡出現了哪個五行、十神」的表格，放到 **命盤總覽 Tab** 去做。

---

#### 3.3.4 含藏干统计（Hidden Stem Stat）

**位置**: 五行分佈下方

**卡片样式**:
- 背景: `colors.cardBg`（白色）
- 圆角: `radius.lg`
- 边框: `colors.border`（细线）
- 阴影: `shadows.card`
- 内边距: `spacing.lg`
- 上下间距: `spacing.lg`

**标题**:
- 文案: 「含藏干統計」
- 字体大小: `fontSizes.lg`
- 字体粗细: `fontWeights.semibold`
- 文字颜色: `colors.ink`
- 底部间距: `spacing.md`

**设计思路**:
- 在「基本信息」裡只做**簡單統計**，讓專業用戶知道「這盤藏干多不多」「主要集中在哪些五行或十神」
- 不再在此頁展示「每個地支分解成多行藏干表格」；那部分放在命盤總覽

**展示内容**:

**方案一：文字列表 + 小条形图**

```
┌─────────────────────────────────────────┐
│ 含藏干統計                              │
├─────────────────────────────────────────┤
│ 全盤共有 12 個藏干                      │
│                                         │
│ 金  [████████████████░░]  5 個          │
│ 木  [██░░░░░░░░░░░░░░░░]  1 個          │
│ 水  [████████░░░░░░░░░░]  3 個          │
│ 火  [██░░░░░░░░░░░░░░░░]  1 個          │
│ 土  [████░░░░░░░░░░░░░░]  2 個          │
│                                         │
│ 偏印最多，其次比劫，財星較少            │
└─────────────────────────────────────────┘
```

**方案二：饼图或环形图**（可选，更美观）

```
┌─────────────────────────────────────────┐
│ 含藏干統計                              │
├─────────────────────────────────────────┤
│         [饼图/环形图]                   │
│     金 5  木 1  水 3                    │
│     火 1  土 2                          │
│                                         │
│ 全盤共有 12 個藏干                      │
│ 偏印最多，其次比劫，財星較少            │
└─────────────────────────────────────────┘
```

**推荐方案一（简单条形图）**:

1. **总统计文字**:
   - 文案: 「全盤共有 {{totalHiddenStems}} 個藏干」
   - 字体大小: `fontSizes.base`
   - 字体粗细: `fontWeights.medium`
   - 文字颜色: `colors.ink`
   - 底部间距: `spacing.md`

2. **五行统计列表**（类似五行分佈的简化版）:
   - 每个五行一行
   - 左侧: 五行名称
   - 中间: 小条形图（高度 16px，颜色与五行分佈一致）
   - 右侧: 数量「X 個」
   - 五行之间间距: `spacing.sm`

3. **十神统计说明**（可选）:
   - 文案: 「偏印最多，其次比劫，財星較少」
   - 字体大小: `fontSizes.sm`
   - 字体粗细: `fontWeights.regular`
   - 文字颜色: `colors.textSecondary`
   - 顶部间距: `spacing.md`
   - 字体样式: 斜体（可选）

**布局**:
- 总统计文字居中或左对齐
- 五行统计列表垂直排列
- 十神统计说明左对齐

**数据结构**:
```typescript
interface HiddenStemElementStat {
  element: WuXingElement; // 五行
  count: number;          // 該五行的「藏干」總數
}

interface HiddenStemStat {
  totalHiddenStems: number;              // 藏干總數
  byElement: HiddenStemElementStat[];    // 五行維度統計（按金木水火土顺序）
  byTenGodDesc?: string;                 // 可選：按十神聚合的簡要統計，例如：'偏印最多，其次比劫，財星較少'
}
```

> 若暫時不想做太複雜，保留 `totalHiddenStems + byElement[]` 即可。

---

#### 3.3.5 身強身弱參考（Body Strength Reference）

**位置**: 含藏干统计下方

**卡片样式**:
- 背景: `colors.cardBg`（白色）
- 圆角: `radius.lg`
- 边框: `colors.border`（细线）
- 阴影: `shadows.card`
- 内边距: `spacing.lg`
- 上下间距: `spacing.lg`

**标题**:
- 文案: 「身強身弱參考」
- 字体大小: `fontSizes.lg`
- 字体粗细: `fontWeights.semibold`
- 文字颜色: `colors.ink`
- 底部间距: `spacing.md`

**展示内容**:

**可视化进度条**:

```
┌─────────────────────────────────────────┐
│ 身強身弱參考                            │
├─────────────────────────────────────────┤
│                                         │
│  極弱  弱  偏弱  平衡  偏強  強  極強   │
│  [─────●──────────────────────]         │
│                                         │
│  35 分｜偏弱                             │
└─────────────────────────────────────────┘
```

**样式设计**:

1. **进度条背景**:
   - 背景: `colors.disabledBg`（浅灰色）
   - 高度: 8px
   - 圆角: `radius.sm`
   - 宽度: 100%
   - 底部间距: `spacing.sm`

2. **进度条填充**:
   - 使用渐变色填充
   - 从弱到强: 蓝色 → 绿色 → 橙色 → 红色
   - 或使用单一品牌色: `colors.brandBlue`
   - 高度: 8px
   - 圆角: `radius.sm`
   - 宽度: 根据 `score` 计算（`score / 100 * 100%`）

3. **滑块指示器**:
   - 位置: 根据 `score` 定位
   - 形状: 圆形
   - 尺寸: 16x16px
   - 背景: `colors.brandBlue`
   - 边框: 2px 白色
   - 阴影: 轻微阴影
   - 位置: 在进度条上方，居中

4. **刻度标签**（可选）:
   - 文案: 「極弱」「弱」「偏弱」「平衡」「偏強」「強」「極強」
   - 字体大小: `fontSizes.xs`
   - 字体粗细: `fontWeights.regular`
   - 文字颜色: `colors.textSecondary`
   - 位置: 进度条下方，均匀分布
   - 顶部间距: `spacing.xs`

5. **分数和总结文字**:
   - 文案: 「{{score}} 分｜{{summaryText}}」
   - 字体大小: `fontSizes.base`
   - 字体粗细: `fontWeights.medium`
   - 文字颜色: `colors.ink`
   - 对齐方式: 居中
   - 顶部间距: `spacing.md`

**布局**:
- 进度条区域居中
- 分数和总结文字居中显示

**数据结构**:
```typescript
interface BodyStrengthReference {
  score: number; // 0~100
  level:
    | '極弱'
    | '弱'
    | '偏弱'
    | '平衡'
    | '偏強'
    | '強'
    | '極強';
  summaryText: string; // 例如: '偏弱'
}
```

---

#### 3.3.6 喜忌用神（Yong Shen Summary）

**位置**: 身強身弱參考下方

**卡片样式**:
- 背景: `colors.cardBg`（白色）
- 圆角: `radius.lg`
- 边框: `colors.border`（细线）
- 阴影: `shadows.card`
- 内边距: `spacing.lg`
- 上下间距: `spacing.lg`
- 底部间距: `spacing.xl`（最后一个区块）

**标题**:
- 文案: 「喜忌用神」
- 字体大小: `fontSizes.lg`
- 字体粗细: `fontWeights.semibold`
- 文字颜色: `colors.ink`
- 底部间距: `spacing.md`

**展示内容**:

**方案一：流程图 + 文字总结**

```
┌─────────────────────────────────────────┐
│ 喜忌用神                                │
├─────────────────────────────────────────┤
│                                         │
│   [旺] → [相] → [休] → [囚] → [死]     │
│   水     木     火     土     金        │
│                                         │
│  最喜用水 次喜用木 喜用火              │
│  次忌用土 最忌用金                     │
└─────────────────────────────────────────┘
```

**方案二：优先级列表 + 颜色标识**（推荐，更清晰）

```
┌─────────────────────────────────────────┐
│ 喜忌用神                                │
├─────────────────────────────────────────┤
│                                         │
│  [最喜]  水  [████████████████████]     │
│  [次喜]  木  [████████████████░░░░]     │
│  [喜用]  火  [████████████░░░░░░░░]     │
│  [次忌]  土  [████████░░░░░░░░░░░░]     │
│  [最忌]  金  [████░░░░░░░░░░░░░░░░]     │
│                                         │
│  最喜用水 次喜用木 喜用火              │
│  次忌用土 最忌用金                     │
└─────────────────────────────────────────┘
```

**推荐方案二**:

1. **优先级列表**:
   - 每个优先级一行
   - 左侧: 优先级标签（如「最喜」「次喜」等）
   - 中间: 五行名称
   - 右侧: 可视化条形图（表示优先级强度）

2. **优先级标签样式**:
   - 背景: 根据优先级使用不同颜色
     - 最喜: `colors.brandGreen`（绿色）
     - 次喜: `colors.blueSoftBg`（浅蓝色）
     - 喜用: `colors.blueSoftBg`（浅蓝色）
     - 次忌: `colors.orangeSoftBg`（浅橙色）
     - 最忌: `colors.error`（红色）或 `colors.brandOrange`
   - 文字颜色: 白色（最喜、最忌）或 `colors.ink`（其他）
   - 字体大小: `fontSizes.xs`
   - 字体粗细: `fontWeights.medium`
   - 圆角: `radius.sm`
   - 内边距: 左右 `spacing.xs`，上下 `spacing.xs / 2`
   - 宽度: 约 48px（固定宽度）

3. **五行名称**:
   - 字体大小: `fontSizes.base`
   - 字体粗细: `fontWeights.semibold`
   - 文字颜色: `colors.ink`
   - 宽度: 约 32px（固定宽度）

4. **优先级条形图**:
   - 背景: `colors.disabledBg`（浅灰色）
   - 填充色: 与优先级标签颜色一致
   - 高度: 20px
   - 圆角: `radius.sm`
   - 宽度: 根据 `order` 计算（`(6 - order) / 5 * 100%`）
   - 最小宽度: 20px

5. **总结文字**:
   - 文案: 「最喜用水 次喜用木 喜用火 次忌用土 最忌用金」
   - 字体大小: `fontSizes.base`
   - 字体粗细: `fontWeights.regular`
   - 文字颜色: `colors.ink`
   - 行高: `lineHeights.normal`
   - 对齐方式: 居中
   - 顶部间距: `spacing.md`
   - 背景: `colors.greenSoftBg`（浅绿色背景，可选）
   - 内边距: `spacing.md`
   - 圆角: `radius.md`

**布局**:
- 优先级列表垂直排列
- 每个优先级项目: 标签、五行名称、条形图水平排列
- 优先级项目之间间距: `spacing.sm`
- 总结文字居中显示

**数据结构**:
```typescript
interface YongShenPreferenceItem {
  order: number;               // 1=最喜 … 5=最忌
  element: WuXingElement;
  label: string;               // '最喜用神'、'次喜用神'、'喜用'、'次忌用神'、'最忌用神'
}

interface YongShenSummary {
  strengthRef: BodyStrengthReference; // 從身強身弱那裡沿用
  preferences: YongShenPreferenceItem[]; // 按 order 排序（1-5）
  summaryText: string;                // 一句總結，例如: '最喜用水 次喜用木 喜用火 次忌用土 最忌用金'
}
```

---

### 3.4 整体风格要求

#### 3.4.1 背景与布局
- **整体背景**: 纯白色（`colors.bg`）
- **内容区域**: 使用 `ScrollView` 包裹，支持垂直滚动
- **安全区域**: 使用 `SafeAreaView` 包裹，避免顶部遮挡
- **页面内边距**: 左右 `spacing.lg`

#### 3.4.2 卡片样式
- **背景**: 白色（`colors.cardBg`）
- **圆角**: `radius.lg`（12px）
- **边框**: `colors.border`（细线，1px）
- **阴影**: `shadows.card`（轻微阴影）
- **内边距**: `spacing.lg`（24px）
- **卡片间距**: `spacing.lg`（24px）

#### 3.4.3 文字颜色
- **主标题**: `colors.ink`（#32343a）
- **副标题/说明文字**: `colors.textSecondary`（#6b7280）
- **重点数据**: `colors.brandBlue`（#648e93）

#### 3.4.4 图表颜色
- **五行颜色**:
  - 金: `#FFD700`（金色）或使用 `colors.brandOrange`
  - 木: `#32CD32`（绿色）或使用 `colors.brandGreen`
  - 水: `#1E90FF`（蓝色）或使用 `colors.brandBlue`
  - 火: `#FF4500`（红色）或使用 `colors.brandOrange`
  - 土: `#8B4513`（棕色）或使用 `colors.textSecondary`

---

## 数据需求

### 4.1 总数据接口

```typescript
interface BaziBasicInfoTabData {
  profileFile: BaziProfileFile;           // 命盤檔案
  dayMasterOverview: DayMasterOverview;   // 日主概覽
  fiveElementStat: FiveElementStat;       // 五行分佈（統計）
  hiddenStemStat: HiddenStemStat;         // 含藏干統計
  bodyStrength: BodyStrengthReference;    // 身強身弱參考
  yongShen: YongShenSummary;              // 喜忌用神
}
```

### 4.2 数据说明

- 前端只需按照上述字段渲染
- 若某個區塊對應字段為 `null/undefined`，可整塊隱藏
- 所有数据由后端 API 提供
- 数据格式需符合 TypeScript 接口定义

---

## 交互流程

### 5.1 用户操作流程

1. **进入页面**
   - 用户完成排盤后，自动进入「基本信息」Tab
   - 页面加载数据并展示

2. **浏览内容**
   - 用户垂直滚动查看各个区块
   - 查看命盤檔案、日主概覽、五行统计等信息

3. **切换 Tab**
   - 点击顶部 Tab 切换到「命盤總覽」或「大運流年」
   - 当前 Tab 高亮显示

### 5.2 数据加载

- 页面进入时加载所有数据
- 显示加载状态（可选）
- 数据加载失败时显示错误提示

---

## 技术实现（预留）

### 6.1 技术要点

- 页面滚动实现（ScrollView）
- 图表组件实现（条形图、进度条）
- 数据格式化（日期、数字等）
- 响应式布局
- 数据加载和错误处理

### 6.2 相关文件结构

```
src/
├── screens/
│   └── Bazi/
│       ├── BaziScreen.tsx              # 命盤主页面
│       ├── BasicInfoTab.tsx            # 基本信息 Tab
│       └── components/
│           ├── ProfileFileCard.tsx     # 命盤檔案卡片
│           ├── DayMasterCard.tsx       # 日主概覽卡片
│           ├── FiveElementStatCard.tsx # 五行分佈卡片
│           ├── HiddenStemStatCard.tsx  # 含藏干统计卡片
│           ├── BodyStrengthCard.tsx    # 身強身弱卡片
│           ├── YongShenCard.tsx        # 喜忌用神卡片
│           └── charts/
│               ├── BarChart.tsx        # 条形图组件
│               └── ProgressBar.tsx     # 进度条组件
├── services/
│   └── api/
│       └── baziService.ts              # 命盤 API
└── types/
    └── bazi.ts                         # 命盤类型定义
```

---

## 设计规范

### 7.1 视觉设计

- **遵循 UI_SPEC.md 中的设计规范**
- 使用 Design Tokens（colors, typography, layout）
- 整体背景为纯白色
- 卡片使用圆角、边框、阴影区分层级
- 保持充足的留白

### 7.2 交互设计

- 页面滚动流畅
- 图表展示清晰
- 数据展示易读

### 7.3 响应式设计

- 适配不同屏幕尺寸
- 内容在小屏设备上可正常滚动
- 图表在小屏上保持可读性

---

## 图表设计说明

### 8.1 五行分佈条形图

**设计要点**:
- 使用横向条形图，直观展示五行分布
- 每个五行使用对应的传统颜色
- 条形图宽度反映数量占比
- 右侧显示具体数字和简要说明

**视觉层次**:
- 五行名称（左侧）→ 条形图（中间，主要视觉）→ 统计文字（右侧）

### 8.2 含藏干统计图表

**设计要点**:
- 使用简化的小条形图
- 清晰展示藏干总数和五行分布
- 可选添加十神统计说明

### 8.3 身強身弱进度条

**设计要点**:
- 使用渐变色进度条，从弱到强颜色渐变
- 滑块指示器清晰标示当前位置
- 刻度标签帮助理解等级
- 分数和总结文字突出显示

### 8.4 喜忌用神优先级图

**设计要点**:
- 使用优先级列表 + 条形图
- 不同优先级使用不同颜色标识
- 最喜和最忌使用对比鲜明的颜色
- 总结文字使用浅色背景突出显示

---

## 待确认事项

- [x] 页面布局和区块设计（已确认）
- [x] 五行分佈仅做统计（已确认）
- [x] 含藏干仅做统计（已确认）
- [ ] 五行颜色具体色值（使用传统颜色还是品牌色）
- [ ] 图表组件的具体实现方式（自定义还是使用第三方库）
- [ ] 数据加载时机（页面进入时还是 Tab 切换时）
- [ ] 是否需要数据缓存
- [ ] 是否需要支持数据刷新

---

## 更新记录

- **创建日期**: 2024年11月
- **文档版本**: v1.2.0
- **最后更新**: 2024年11月
- **更新内容**: 
  - 初始版本
  - 基于 v1.1 调整，五行分佈和含藏干仅做统计
  - 详细表格移至「命盤總覽」Tab
- **维护者**: 开发团队

