# 八字詳解-神煞解读弹窗设计文档

## 页面概述

### 组件名称
神煞解读弹窗 / Shen Sha Popup / 神煞解读 Bottom Sheet

### 组件定位
- **组件类型**: 弹窗组件（Bottom Sheet）
- **用户类型**: 所有用户
- **触发方式**: 从基础命盘表格中点击可点击的神煞胶囊
- **访问条件**: 用户查看命盘表格时可见

### 组件目的
当用户点击可点击的神煞时，弹出神煞解读弹窗，展示该神煞的详细解读信息，并提供推荐提问，引导用户进入聊天页面进行更深入的讨论。

---

## 功能需求

### 2.1 核心功能

#### 2.1.1 神煞解读展示
- 展示神煞的详细解读信息
- 分阶段显示内容（伪流式动画）
- 提供推荐提问

#### 2.1.2 跳转聊天
- 点击推荐提问或主 CTA 按钮
- 跳转到聊天页面，自动填充问题
- 传递命盘和神煞信息

---

## 弹窗设计

### 3.1 整体布局

**弹窗类型**: Bottom Sheet（从底部滑出）

**打开方式**:
- 触发点: 点击神煞区域中带 `key` 的彩色胶囊
- 打开动画: 从底部滑出，平滑过渡
- 背景: 半透明蒙层 + 轻微模糊

**弹窗容器**:
- 背景: `colors.bg`（白色）
- 圆角: 顶部 `radius.xl`（16px），底部 0
- 最大高度: 屏幕高度的 80%
- 位置: 底部对齐
- 内边距: `spacing.lg`

**遮罩层**:
- 背景: 半透明黑色（`rgba(0, 0, 0, 0.4)`）
- 点击行为: 关闭弹窗

---

### 3.2 详细区块设计

#### 3.2.1 拖拽指示器

**位置**: 弹窗顶部

**样式**:
- 形状: 水平横条
- 宽度: 40px
- 高度: 4px
- 背景: `colors.disabledBg`（浅灰色）
- 圆角: `radius.pill`
- 居中显示
- 底部间距: `spacing.md`

---

#### 3.2.2 标题区（Step 0 - 立即显示）

**位置**: 拖拽指示器下方

**样式**:
- 内边距: 底部 `spacing.md`

**上方小字**:
- 文案: `{pillarLabel} · 神煞解讀`
  - 示例: 「月柱 · 神煞解讀」
- 字体大小: `fontSizes.xs`
- 文字颜色: `colors.textSecondary`
- 底部间距: `spacing.xs`

**大标题**:
- 布局: 水平排列，左侧标题，右侧徽标
- 标题: 神煞名称（如「亡神」）
  - 字体大小: `fontSizes.lg`
  - 字体粗细: `fontWeights.bold`
  - 文字颜色: `colors.ink`
- 徽标: `badgeText`（如「帶挑戰」「吉神」）
  - 背景: 根据 `type` 类型决定颜色
    - `auspicious`（吉神）: `colors.greenSoftBg` + `colors.brandGreen` 文字
    - `inauspicious`（凶神）: `colors.orangeSoftBg` + `colors.ink` 文字
    - `neutral`（中性）: `colors.blueSoftBg` + `colors.brandBlue` 文字
  - 圆角: `radius.pill`
  - 内边距: 左右 `spacing.xs`，上下 `spacing.xs / 2`
  - 字体大小: `fontSizes.xs`
  - 左侧间距: `spacing.sm`

---

#### 3.2.3 Step 1：短标题（150ms 后显示）

**位置**: 标题区下方

**样式**:
- 内边距: 顶部 `spacing.md`
- 动画: 淡入 + 向上滑动

**内容**:
- 文案: `shortTitle`
  - 示例: 「在人際與親密關係上較敏感」
- 字体大小: `fontSizes.base`
- 字体粗细: `fontWeights.medium`
- 文字颜色: `colors.ink`
- 行高: `lineHeights.normal`

---

#### 3.2.4 Step 2：一句话总结（350ms 后显示）

**位置**: 短标题下方

**样式**:
- 内边距: 顶部 `spacing.md`
- 动画: 淡入 + 向上滑动

**卡片样式**:
- 背景: `colors.disabledBg`（浅灰色）
- 圆角: `radius.md`
- 内边距: `spacing.md`
- 边框: `colors.border`（1px，可选）

**内容**:
- 文案: `oneSentenceSummary`
  - 示例: 「亡神通常代表在人際關係中容易感到孤獨，但也可能帶來深度思考的能力。」
- 字体大小: `fontSizes.sm`
- 文字颜色: `colors.ink`
- 行高: `lineHeights.relaxed`

---

#### 3.2.5 Step 3：列表要点（650ms 后显示）

**位置**: 一句话总结下方

**样式**:
- 内边距: 顶部 `spacing.md`
- 动画: 淡入 + 向上滑动

**标题**:
- 文案: 「可能的表現方式：」
- 字体大小: `fontSizes.sm`
- 字体粗细: `fontWeights.semibold`
- 文字颜色: `colors.ink`
- 底部间距: `spacing.sm`

**列表**:
- 渲染 `bulletPoints` 为条目列表
- 每个条目:
  - 左侧: 小圆点（•）
    - 颜色: `colors.brandBlue`
    - 字体大小: `fontSizes.base`
  - 右侧: 要点文字
    - 字体大小: `fontSizes.sm`
    - 文字颜色: `colors.ink`
    - 行高: `lineHeights.normal`
- 条目之间间距: `spacing.sm`
- 布局: 水平排列，左侧圆点，右侧文字

---

#### 3.2.6 Step 4：柱位说明（950ms 后显示）

**位置**: 列表要点下方

**样式**:
- 内边距: 顶部 `spacing.md`
- 动画: 淡入 + 向上滑动

**标题**:
- 文案: 「在這個位置上的重點：」
- 字体大小: `fontSizes.sm`
- 字体粗细: `fontWeights.semibold`
- 文字颜色: `colors.ink`
- 底部间距: `spacing.sm`

**内容**:
- 文案: `forThisPosition`
  - 示例: 「月柱的亡神，主要影響你在人際關係和情感表達上的方式。」
- 字体大小: `fontSizes.sm`
- 文字颜色: `colors.ink`
- 行高: `lineHeights.relaxed`

---

#### 3.2.7 推荐提问区

**位置**: 柱位说明下方

**样式**:
- 内边距: 顶部 `spacing.lg`
- 动画: 淡入 + 向上滑动（与 Step 4 同时或稍后）

**标题**:
- 文案: 「你可以這樣問小佩：」
- 字体大小: `fontSizes.sm`
- 字体粗细: `fontWeights.semibold`
- 文字颜色: `colors.ink`
- 底部间距: `spacing.sm`

**问题列表**:
- 从 `questionsPool` 随机取 3-4 条问题
- 使用 Chip 组件展示
- Chip 样式:
  - 背景: `colors.blueSoftBg`（浅蓝色）
  - 文字颜色: `colors.ink`
  - 圆角: `radius.pill`
  - 内边距: 左右 `spacing.md`，上下 `spacing.xs`
  - 字体大小: `fontSizes.sm`
  - 点击反馈: `activeOpacity: 0.7`
- Chip 之间间距: `spacing.sm`
- 布局: 水平排列，可换行

**点击行为**:
- 点击任意问题 → 跳转到聊天页面
- 传递参数:
  - `source: 'shen_sha_popup'`
  - `chart_id`: 当前命盘 ID
  - `shen_sha_code`: 神煞代码
  - `pillar_type`: 柱位类型
  - `question`: 问题文本

---

#### 3.2.8 主 CTA 按钮

**位置**: 推荐提问区下方

**样式**:
- 内边距: 顶部 `spacing.lg`
- 动画: 淡入 + 向上滑动（与推荐提问区同时或稍后）

**按钮样式**:
- 按钮类型: `PrimaryButton`
- 文案: `和小佩聊聊「{{shenShaName}}」對我的影響`
  - 示例: 「和小佩聊聊「亡神」對我的影響」
- 背景色: `colors.ink`（黑色）
- 文字颜色: 白色
- 圆角: `radius.pill`
- 宽度: 100%
- 高度: 48px
- 字体大小: `fontSizes.base`
- 字体粗细: `fontWeights.semibold`
- 点击反馈: `activeOpacity: 0.8`

**点击行为**:
- 跳转到聊天页面
- 传递参数（同推荐提问）
- 问题内容: 「{{shenShaName}}對我的影響是什麼？」

---

#### 3.2.9 底部提示（可选）

**位置**: 主 CTA 按钮下方

**样式**:
- 内边距: 顶部 `spacing.md`
- 对齐方式: 居中

**内容**:
- 文案: 「實際接入時會攜帶 chart_id / shen_sha / pillar / question 進入聊天意圖」
- 字体大小: `fontSizes.xs`（10px）
- 文字颜色: `colors.textSecondary`
- 字体样式: 斜体（可选）

---

#### 3.2.10 关闭按钮

**位置**: 弹窗右上角

**样式**:
- 图标: 「X」（Close）
- 尺寸: 24x24px
- 颜色: `colors.textSecondary`
- 点击行为: 关闭弹窗

---

### 3.3 伪流式动画（动效）

**设计思路**: 在打开弹窗后，使用定时器/动画使内容分梯度出现，营造「逐步生成」的感觉。

**动画时间轴**:
- 0ms: 标题立即显示（无动画）
- 150ms: 短标题（淡入 + 向上滑动）
- 350ms: 一句话总结（淡入 + 向上滑动）
- 650ms: 列表要点（淡入 + 向上滑动）
- 950ms: 柱位说明（淡入 + 向上滑动）
- 1200ms: 推荐提问区 + 主 CTA 按钮（淡入 + 向上滑动）

**动画参数**:
- 淡入: `opacity: 0 → 1`
- 向上滑动: `translateY: 10px → 0`
- 时长: 200-300ms
- 缓动: `Easing.out(Easing.quad)`

**实现方式**:
- 使用 React Native Animated API
- 或使用 CSS 动画（Web）
- 避免真正串流接口，纯前端分段显示

---

## 数据需求

### 4.1 神煞配置结构

#### 4.1.1 神煞类型定义

```typescript
type ShenShaType = 'auspicious' | 'inauspicious' | 'neutral';

interface ShenShaConfig {
  code: string;          // 系统内部代码，如 "wang_shen"
  name: string;          // 显示名，如 "亡神"
  pillarType: 'year' | 'month' | 'day' | 'hour'; // 所在柱位
  pillarLabel: string;   // 用于显示，如 "月柱"
  badgeText: string;     // 小标签，例如 "吉神" / "帶挑戰" / "桃花"
  shortTitle: string;    // 短标题，一句话概括特征
  oneSentenceSummary: string;   // 一句话总结
  bulletPoints: string[];       // 3~4 条具体表现
  forThisPosition: string;      // 针对所在柱位的具体说明
  questionsPool: string[];      // 推荐提问池（前端一次随机取 3~4 个）
  type: ShenShaType;            // 用于决定配色
}
```

#### 4.1.2 神煞数据映射

```typescript
const SHEN_SHA_DATA: Record<string, ShenShaConfig> = {
  wang_shen_month: {
    code: 'wang_shen',
    name: '亡神',
    pillarType: 'month',
    pillarLabel: '月柱',
    badgeText: '帶挑戰',
    shortTitle: '在人際與親密關係上較敏感',
    oneSentenceSummary: '亡神通常代表在人際關係中容易感到孤獨，但也可能帶來深度思考的能力。',
    bulletPoints: [
      '在人際關係中容易感到孤獨或疏離',
      '對情感表達較為內斂，不輕易表露真實想法',
      '可能在人際互動中表現出較強的防禦性',
      '但也因此具備深度思考和內省的能力',
    ],
    forThisPosition: '月柱的亡神，主要影響你在人際關係和情感表達上的方式。',
    questionsPool: [
      '亡神對我的影響是什麼？',
      '月柱的亡神會如何影響我的人際關係？',
      '我該如何應對亡神帶來的挑戰？',
      '亡神有沒有積極的一面？',
    ],
    type: 'inauspicious',
  },
  tianyi_year: {
    code: 'tianyi',
    name: '天乙',
    pillarType: 'year',
    pillarLabel: '年柱',
    badgeText: '吉神',
    shortTitle: '貴人運較強，容易得到幫助',
    oneSentenceSummary: '天乙貴人代表容易遇到貴人相助，在人生關鍵時刻得到幫助。',
    bulletPoints: [
      '容易在關鍵時刻遇到貴人相助',
      '人際關係中容易得到長輩或權威人士的幫助',
      '在困難時期往往能化險為夷',
      '具備較強的社交能力和人脈資源',
    ],
    forThisPosition: '年柱的天乙，主要影響你整體的人生運勢和人際關係。',
    questionsPool: [
      '天乙貴人對我的影響是什麼？',
      '年柱的天乙會如何幫助我？',
      '我該如何善用天乙貴人的力量？',
      '天乙貴人在什麼時候最有效？',
    ],
    type: 'auspicious',
  },
  hong_luan_day: {
    code: 'hong_luan',
    name: '紅鸞',
    pillarType: 'day',
    pillarLabel: '日柱',
    badgeText: '桃花',
    shortTitle: '感情運較旺，容易吸引異性',
    oneSentenceSummary: '紅鸞星動代表感情運較旺，容易吸引異性，但也需要注意感情上的選擇。',
    bulletPoints: [
      '感情運較旺，容易吸引異性',
      '在感情中較為主動，敢於表達',
      '容易遇到心儀的對象',
      '但也需要注意感情上的選擇和判斷',
    ],
    forThisPosition: '日柱的紅鸞，主要影響你的感情運勢和異性緣。',
    questionsPool: [
      '紅鸞對我的感情運有什麼影響？',
      '日柱的紅鸞會如何影響我的異性緣？',
      '我該如何善用紅鸞的力量？',
      '紅鸞在什麼時候最有效？',
    ],
    type: 'neutral',
  },
  // 可以扩展更多神煞
};
```

---

### 4.2 弹窗数据接口

#### 4.2.1 获取神煞解读数据

**接口**: `GET /api/bazi/shensha/:code`

**请求参数**:
```typescript
interface GetShenShaDetailRequest {
  code: string;           // 神煞代码
  pillar_type: 'year' | 'month' | 'day' | 'hour'; // 柱位类型
  chart_id: string;       // 命盘 ID
}
```

**响应**:
```typescript
interface GetShenShaDetailResponse {
  code: string;
  name: string;
  pillarType: 'year' | 'month' | 'day' | 'hour';
  pillarLabel: string;
  badgeText: string;
  shortTitle: string;
  oneSentenceSummary: string;
  bulletPoints: string[];
  forThisPosition: string;
  questionsPool: string[];
  type: ShenShaType;
}
```

---

## 交互流程

### 5.1 打开弹窗

1. **触发**
   - 用户在基础命盘表格中点击可点击的神煞胶囊
   - 获取神煞的 `key`（如 `wang_shen_month`）

2. **加载数据**
   - 根据 `key` 从 `SHEN_SHA_DATA` 中获取配置
   - 或调用 API 获取神煞解读数据

3. **显示弹窗**
   - 背景显示半透明蒙层
   - 弹窗从底部滑出
   - 标题区立即显示

4. **分阶段显示内容**
   - 按照时间轴依次显示各个步骤
   - 使用动画效果营造「逐步生成」的感觉

---

### 5.2 关闭弹窗

**关闭方式**:
1. 点击遮罩层
2. 点击右上角「X」按钮
3. 向下拖拽弹窗（Bottom Sheet 手势）
4. 点击推荐提问或主 CTA 按钮后自动关闭

**关闭动画**:
- 弹窗向下滑出
- 遮罩层淡出
- 时长: 200-300ms

---

### 5.3 跳转聊天

#### 5.3.1 点击推荐提问

**流程**:
1. 用户点击推荐提问 Chip
2. 获取问题文本
3. 组装跳转参数
4. 关闭弹窗
5. 跳转到聊天页面

**参数组装**:
```typescript
const handleQuestionClick = (question: string) => {
  const params = {
    source: 'shen_sha_popup',
    chart_id: currentChartId,
    shen_sha_code: currentShenSha.code,
    pillar_type: currentShenSha.pillarType,
    question: question,
  };
  
  // 关闭弹窗
  closePopup();
  
  // 跳转到聊天页面
  navigation.navigate('Chat', params);
};
```

#### 5.3.2 点击主 CTA 按钮

**流程**:
1. 用户点击主 CTA 按钮
2. 组装问题文本: 「{{shenShaName}}對我的影響是什麼？」
3. 组装跳转参数
4. 关闭弹窗
5. 跳转到聊天页面

**参数组装**:
```typescript
const handleCTAClick = () => {
  const question = `${currentShenSha.name}對我的影響是什麼？`;
  const params = {
    source: 'shen_sha_popup',
    chart_id: currentChartId,
    shen_sha_code: currentShenSha.code,
    pillar_type: currentShenSha.pillarType,
    question: question,
  };
  
  // 关闭弹窗
  closePopup();
  
  // 跳转到聊天页面
  navigation.navigate('Chat', params);
};
```

---

## 技术实现

### 6.1 组件结构

#### 6.1.1 组件文件组织

```
src/
  components/
    ShenShaPopup/
      index.tsx              # 主组件
      types.ts               # 类型定义
      styles.ts              # 样式定义
      animations.ts          # 动画逻辑
      constants.ts           # 神煞数据配置
```

#### 6.1.2 组件接口

```typescript
interface ShenShaPopupProps {
  visible: boolean;
  shenShaKey: string;        // 神煞 key，如 "wang_shen_month"
  chartId: string;           // 命盘 ID
  onClose: () => void;
  onNavigateToChat: (params: ChatNavigationParams) => void;
}

interface ChatNavigationParams {
  source: 'shen_sha_popup';
  chart_id: string;
  shen_sha_code: string;
  pillar_type: 'year' | 'month' | 'day' | 'hour';
  question: string;
}
```

---

### 6.2 动画实现

#### 6.2.1 伪流式动画逻辑

```typescript
// 使用 React Native Animated API
import { Animated, Easing } from 'react-native';

const useStepAnimation = (stepIndex: number, delay: number) => {
  const opacity = useRef(new Animated.Value(0)).current;
  const translateY = useRef(new Animated.Value(10)).current;

  useEffect(() => {
    const timer = setTimeout(() => {
      Animated.parallel([
        Animated.timing(opacity, {
          toValue: 1,
          duration: 250,
          easing: Easing.out(Easing.quad),
          useNativeDriver: true,
        }),
        Animated.timing(translateY, {
          toValue: 0,
          duration: 250,
          easing: Easing.out(Easing.quad),
          useNativeDriver: true,
        }),
      ]).start();
    }, delay);

    return () => clearTimeout(timer);
  }, [delay]);

  return { opacity, translateY };
};
```

#### 6.2.2 动画时间轴配置

```typescript
const ANIMATION_TIMELINE = {
  step0: 0,        // 标题（立即显示）
  step1: 150,      // 短标题
  step2: 350,      // 一句话总结
  step3: 650,      // 列表要点
  step4: 950,      // 柱位说明
  step5: 1200,     // 推荐提问 + CTA
};
```

---

### 6.3 Bottom Sheet 实现

#### 6.3.1 使用第三方库（推荐）

**方案 A**: 使用 `@gorhom/bottom-sheet`

```typescript
import BottomSheet from '@gorhom/bottom-sheet';

<ShenShaPopup
  bottomSheetRef={bottomSheetRef}
  snapPoints={['80%']}
  enablePanDownToClose
  onClose={handleClose}
>
  {/* 内容 */}
</ShenShaPopup>
```

**方案 B**: 自定义实现

- 使用 `react-native-gesture-handler` 处理拖拽手势
- 使用 `react-native-reanimated` 实现流畅动画
- 支持向下拖拽关闭

---

### 6.4 数据获取

#### 6.4.1 本地配置优先

```typescript
// 优先从本地配置获取
const getShenShaConfig = (key: string): ShenShaConfig | null => {
  return SHEN_SHA_DATA[key] || null;
};
```

#### 6.4.2 API 兜底

```typescript
// 如果本地没有，调用 API
const fetchShenShaDetail = async (
  code: string,
  pillarType: string,
  chartId: string
): Promise<ShenShaConfig> => {
  const response = await api.get(`/api/bazi/shensha/${code}`, {
    params: { pillar_type: pillarType, chart_id: chartId },
  });
  return response.data;
};
```

---

### 6.5 推荐提问随机选择

```typescript
const getRandomQuestions = (
  questionsPool: string[],
  count: number = 3
): string[] => {
  const shuffled = [...questionsPool].sort(() => Math.random() - 0.5);
  return shuffled.slice(0, Math.min(count, questionsPool.length));
};
```

---

## 设计规范

### 7.1 遵循 UI 设计系统

本组件严格遵循 `UI_SPEC.md` 中定义的设计规范：

- **颜色**: 使用 `colors` Design Tokens
- **字体**: 使用 `typography` Design Tokens
- **间距**: 使用 `layout.spacing` Design Tokens
- **圆角**: 使用 `layout.radius` Design Tokens
- **阴影**: 使用 `layout.shadows` Design Tokens

---

### 7.2 组件样式规范

#### 7.2.1 弹窗容器

```typescript
const popupContainerStyle = {
  backgroundColor: colors.bg,
  borderTopLeftRadius: radius.xl,
  borderTopRightRadius: radius.xl,
  padding: spacing.lg,
  maxHeight: '80%',
};
```

#### 7.2.2 徽标样式

```typescript
const getBadgeStyle = (type: ShenShaType) => {
  const baseStyle = {
    borderRadius: radius.pill,
    paddingHorizontal: spacing.xs,
    paddingVertical: spacing.xs / 2,
    fontSize: fontSizes.xs,
  };

  switch (type) {
    case 'auspicious':
      return {
        ...baseStyle,
        backgroundColor: colors.greenSoftBg,
        color: colors.brandGreen,
      };
    case 'inauspicious':
      return {
        ...baseStyle,
        backgroundColor: colors.orangeSoftBg,
        color: colors.ink,
      };
    case 'neutral':
      return {
        ...baseStyle,
        backgroundColor: colors.blueSoftBg,
        color: colors.brandBlue,
      };
  }
};
```

---

### 7.3 响应式设计

- **小屏幕**（< 375px）: 适当减小内边距和字体大小
- **大屏幕**（> 414px）: 限制最大宽度，居中显示
- **横屏模式**: 调整弹窗高度，确保内容可滚动

---

### 7.4 无障碍支持

- **语义化标签**: 使用 `accessibilityLabel` 描述组件
- **焦点管理**: 弹窗打开时，焦点自动移到标题
- **键盘导航**: 支持键盘操作（Web 端）
- **屏幕阅读器**: 提供完整的文本描述

---

## 集成说明

### 8.1 与基础命盘表格的集成

#### 8.1.1 触发方式

在基础命盘表格的神煞行中，可点击的神煞胶囊需要：

1. 绑定 `onPress` 事件
2. 传递神煞 `key` 和命盘 `chartId`
3. 打开神煞解读弹窗

```typescript
// 在基础命盘表格组件中
const handleShenShaClick = (shenShaKey: string) => {
  setSelectedShenShaKey(shenShaKey);
  setPopupVisible(true);
};
```

#### 8.1.2 数据传递

```typescript
<ShenShaPopup
  visible={popupVisible}
  shenShaKey={selectedShenShaKey}
  chartId={currentChartId}
  onClose={() => setPopupVisible(false)}
  onNavigateToChat={handleNavigateToChat}
/>
```

---

### 8.2 与聊天页面的集成

#### 8.2.1 路由参数

聊天页面需要接收以下参数：

```typescript
interface ChatScreenParams {
  source?: 'shen_sha_popup' | 'overview_card' | 'manual';
  chart_id?: string;
  shen_sha_code?: string;
  pillar_type?: 'year' | 'month' | 'day' | 'hour';
  question?: string;
}
```

#### 8.2.2 自动填充问题

```typescript
// 在聊天页面组件中
useEffect(() => {
  if (route.params?.question && route.params?.source === 'shen_sha_popup') {
    // 自动填充问题到输入框
    setInputText(route.params.question);
    // 可选：自动发送（根据产品需求）
    // handleSendMessage(route.params.question);
  }
}, [route.params]);
```

---

## 测试要点

### 9.1 功能测试

- [ ] 弹窗正常打开和关闭
- [ ] 所有关闭方式都能正常工作
- [ ] 动画时间轴正确执行
- [ ] 推荐提问随机选择正确
- [ ] 点击推荐提问正确跳转
- [ ] 点击主 CTA 按钮正确跳转
- [ ] 参数正确传递到聊天页面

---

### 9.2 UI 测试

- [ ] 不同神煞类型的徽标颜色正确
- [ ] 所有文本内容正确显示
- [ ] 布局在不同屏幕尺寸下正常
- [ ] 滚动功能正常（内容超出时）
- [ ] 动画流畅，无卡顿

---

### 9.3 数据测试

- [ ] 本地配置数据正确加载
- [ ] API 数据正确加载（如有）
- [ ] 数据缺失时的错误处理
- [ ] 网络错误时的降级处理

---

## 待确认事项

- [ ] 弹窗最大高度是否固定为 80%
- [ ] 是否需要支持横屏模式
- [ ] 推荐提问的数量（3 个还是 4 个）
- [ ] 是否需要在弹窗中显示命盘基本信息
- [ ] 是否需要支持分享功能
- [ ] 是否需要记录用户点击行为（埋点）
- [ ] 是否需要支持收藏神煞解读
- [ ] 动画时长是否需要可配置

---

## 更新记录

- **创建日期**: 2024年11月
- **文档版本**: v1.0.0
- **最后更新**: 2024年11月
- **更新内容**: 
  - 初始版本
  - 完成神煞解读弹窗的完整设计
  - 包含动画、交互、数据、技术实现等全部内容
- **维护者**: 开发团队