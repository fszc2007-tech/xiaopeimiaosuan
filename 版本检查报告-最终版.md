# ç‰ˆæœ¬æ£€æŸ¥æŠ¥å‘Š - æœ€ç»ˆç‰ˆ

**æ£€æŸ¥æ—¶é—´**: 2025-12-24  
**Git æäº¤**: `938c675`  
**æ„å»ºç‰ˆæœ¬**: 1.0.3 (versionCode: 3)

---

## âœ… æ£€æŸ¥ç»“æœï¼šå…¨éƒ¨æ­£ç¡®

### 1. Git æäº¤ç‰ˆæœ¬ âœ…

**æäº¤ä¿¡æ¯**:
- **æäº¤ ID**: `938c675cae72f9035744ea91d772cc54116ff666`
- **ç‰ˆæœ¬å·**: `1.0.3`
- **versionCode**: `3`
- **æ–‡ä»¶æ•°**: 9 ä¸ªæ–‡ä»¶
- **ä»£ç å˜æ›´**: 165 è¡Œæ–°å¢ï¼Œ44 è¡Œåˆ é™¤

**çŠ¶æ€**: âœ… **æ­£ç¡®**

---

### 2. æ„å»ºç‰ˆæœ¬ âœ…

**æ„å»ºä¿¡æ¯**:
- **æ„å»º ID**: `d234c9e5-a0f0-47d2-aef8-966600be51f6`
- **ç‰ˆæœ¬å·**: `1.0.3`
- **versionCode**: `3`
- **APK**: https://expo.dev/artifacts/eas/rXvT6CsutxYoSaUc26ymgh.apk
- **ç¼“å­˜**: å·²æ¸…é™¤ï¼ˆä½¿ç”¨äº† `--clear-cache`ï¼‰

**çŠ¶æ€**: âœ… **æ­£ç¡®**

---

### 3. å…³é”®ä»£ç æ£€æŸ¥ï¼ˆGit æäº¤ä¸­ï¼‰âœ…

#### 3.1 ç¯å¢ƒå˜é‡è¯Šæ–­æ—¥å¿—

**æ–‡ä»¶**: `app/src/config/env.ts`

**æäº¤å†…å®¹**:
```typescript
console.warn('[ENV DIAGNOSTIC] ğŸ” API_BASE_URL:', ENV.API_BASE_URL);
console.warn('[ENV DIAGNOSTIC] ğŸ” EXPO_PUBLIC_API_BASE_URL:', process.env.EXPO_PUBLIC_API_BASE_URL || 'âŒ æœªè®¾ç½®');
console.warn('[ENV DIAGNOSTIC] ğŸ” APP_ENV:', ENV.APP_ENV);
```

**çŠ¶æ€**: âœ… **å·²æäº¤**

---

#### 3.2 API å®¢æˆ·ç«¯è¯Šæ–­æ—¥å¿—

**æ–‡ä»¶**: `app/src/services/api/apiClient.ts`

**æäº¤å†…å®¹**:
```typescript
console.warn('[API CLIENT DIAGNOSTIC] ğŸ”— baseURL:', API_BASE_URL);
console.warn('[API CLIENT DIAGNOSTIC] ğŸŒ ç¯å¢ƒ:', ENV.APP_ENV);
```

**çŠ¶æ€**: âœ… **å·²æäº¤**

---

#### 3.3 çŸ­ä¿¡è¯·æ±‚è¯Šæ–­æ—¥å¿—

**æ–‡ä»¶**: `app/src/services/api/authService.ts`

**æäº¤å†…å®¹**:
```typescript
console.warn('[SMS REQUEST DIAGNOSTIC] ğŸ“± è¯·æ±‚å‚æ•°:', JSON.stringify(requestParams));
console.warn('[SMS REQUEST DIAGNOSTIC] ğŸ”— API Base URL:', process.env.EXPO_PUBLIC_API_BASE_URL || 'âŒ æœªè®¾ç½®');
```

**çŠ¶æ€**: âœ… **å·²æäº¤**

---

#### 3.4 Google é…ç½®è¯Šæ–­æ—¥å¿—

**æ–‡ä»¶**: `app/src/config/google.ts`

**æäº¤å†…å®¹**:
```typescript
console.warn('[GOOGLE CONFIG DIAGNOSTIC] ğŸ” Web Client ID:', GOOGLE_CONFIG.webClientId);
console.warn('[GOOGLE CONFIG DIAGNOSTIC] ğŸ” Environment:', process.env.EXPO_PUBLIC_ENV || 'development');
```

**çŠ¶æ€**: âœ… **å·²æäº¤**

---

#### 3.5 PDF åŠ è½½ä¿®å¤

**æ–‡ä»¶**: `app/src/screens/Auth/PolicyViewerScreen.tsx`

**æäº¤å†…å®¹**:
```typescript
const pdfUrl = rawPdfUrl;  // ç›´æ¥ä½¿ç”¨ PDF URLï¼Œä¸ä½¿ç”¨ Google Docs Viewer
```

**çŠ¶æ€**: âœ… **å·²æäº¤**

---

#### 3.6 åä¸º Mate 40 é€‚é…

**æ–‡ä»¶**: `app/src/components/auth/GoogleLoginSheet.tsx`

**æäº¤å†…å®¹**:
```typescript
const insets = useSafeAreaInsets();
const sheetHeight = Math.min(baseHeight, screenHeight * 0.5);
// ...
height: sheetHeight,
maxHeight: '50%',
```

**çŠ¶æ€**: âœ… **å·²æäº¤**

---

#### 3.7 çŸ­ä¿¡è¯·æ±‚å‚æ•°ä¿®å¤

**æ–‡ä»¶**: `app/src/types/user.ts`

**æäº¤å†…å®¹**:
```typescript
export interface RequestOtpRequest {
  region?: 'cn' | 'hk' | 'mo' | 'tw' | 'intl';
  countryCode?: string;
}
```

**çŠ¶æ€**: âœ… **å·²æäº¤**

---

### 4. EAS æ„å»ºé…ç½® âœ…

**æ–‡ä»¶**: `app/eas.json`

**ç”Ÿäº§ç¯å¢ƒé…ç½®**:
```json
{
  "production": {
    "env": {
      "EXPO_PUBLIC_ENV": "production",
      "EXPO_PUBLIC_API_BASE_URL": "https://xiaopei-core-343578696044.asia-east2.run.app",
      "EXPO_PUBLIC_APP_ENV_HEADER": "production"
    }
  }
}
```

**æ£€æŸ¥é¡¹**:
- âœ… `EXPO_PUBLIC_ENV`: "production"
- âœ… `EXPO_PUBLIC_API_BASE_URL`: "https://xiaopei-core-343578696044.asia-east2.run.app"
- âœ… `EXPO_PUBLIC_APP_ENV_HEADER`: "production"

**çŠ¶æ€**: âœ… **é…ç½®æ­£ç¡®**

---

## ğŸ“Š æœ€ç»ˆç»“è®º

### âœ… æäº¤ç‰ˆæœ¬
- **ç‰ˆæœ¬å·**: 1.0.3 (versionCode: 3) âœ…
- **æ‰€æœ‰ä¿®æ”¹**: å·²æäº¤åˆ° Git âœ…
- **å…³é”®ä»£ç **: å…¨éƒ¨åŒ…å«åœ¨æäº¤ä¸­ âœ…

### âœ… æ„å»ºç‰ˆæœ¬
- **ç‰ˆæœ¬å·**: 1.0.3 (versionCode: 3) âœ…
- **ç¯å¢ƒå˜é‡**: é…ç½®æ­£ç¡® âœ…
- **API_BASE_URL**: https://xiaopei-core-343578696044.asia-east2.run.app âœ…
- **ç¼“å­˜**: å·²æ¸…é™¤ âœ…

### âœ… ä»£ç å®Œæ•´æ€§
- **PDF åŠ è½½ä¿®å¤**: âœ… å·²æäº¤
- **çŸ­ä¿¡å‚æ•°ä¿®å¤**: âœ… å·²æäº¤
- **Google ç™»å½•è¯Šæ–­**: âœ… å·²æäº¤
- **åä¸º Mate 40 é€‚é…**: âœ… å·²æäº¤
- **ç¯å¢ƒå˜é‡è¯Šæ–­**: âœ… å·²æäº¤
- **API å®¢æˆ·ç«¯è¯Šæ–­**: âœ… å·²æäº¤

---

## ğŸ¯ éªŒè¯æ¸…å•

å®‰è£… APK åï¼ŒéªŒè¯ä»¥ä¸‹å†…å®¹ï¼š

### 1. ç‰ˆæœ¬å·éªŒè¯
- [ ] App è®¾ç½®ä¸­æ˜¾ç¤ºç‰ˆæœ¬å·ï¼š**1.0.3**

### 2. ç¯å¢ƒå˜é‡è¯Šæ–­
```bash
adb logcat | grep "ENV DIAGNOSTIC"
```
**é¢„æœŸè¾“å‡º**:
```
[ENV DIAGNOSTIC] ğŸ” API_BASE_URL: https://xiaopei-core-343578696044.asia-east2.run.app
[ENV DIAGNOSTIC] ğŸ” EXPO_PUBLIC_API_BASE_URL: https://xiaopei-core-343578696044.asia-east2.run.app
[ENV DIAGNOSTIC] ğŸ” APP_ENV: production
```

### 3. ç”¨æˆ·åè®®æŸ¥çœ‹
- [ ] æ‰“å¼€ç”¨æˆ·åè®®é¡µé¢
- [ ] åº”èƒ½ç›´æ¥åŠ è½½ PDFï¼Œæˆ–æ˜¾ç¤ºé”™è¯¯æç¤ºå’Œ"åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€"é€‰é¡¹

### 4. çŸ­ä¿¡å‘é€
```bash
adb logcat | grep "SMS REQUEST DIAGNOSTIC"
```
**é¢„æœŸè¾“å‡º**:
```
[SMS REQUEST DIAGNOSTIC] ğŸ“± è¯·æ±‚å‚æ•°: {"phone":"+852...","region":"hk"}
[SMS REQUEST DIAGNOSTIC] ğŸ”— API Base URL: https://xiaopei-core-343578696044.asia-east2.run.app
```

### 5. Google ç™»å½•
```bash
adb logcat | grep "GOOGLE CONFIG DIAGNOSTIC"
```
**é¢„æœŸè¾“å‡º**:
```
[GOOGLE CONFIG DIAGNOSTIC] ğŸ” Web Client ID: 343578696044-gfrfdivav9muhaosdsf01fib85b9ep6q.apps.googleusercontent.com
[GOOGLE CONFIG DIAGNOSTIC] ğŸ” Environment: production
```

### 6. åä¸º Mate 40 é€‚é…
- [ ] Google ç™»å½•å¼¹çª—é«˜åº¦ä¸è¶…è¿‡å±å¹• 50%
- [ ] å®‰å…¨åŒºåŸŸå¤„ç†æ­£ç¡®
- [ ] å†…å®¹ä¸è¢«åº•éƒ¨é®æŒ¡

---

## âœ… æ€»ç»“

**æ‰€æœ‰æ£€æŸ¥é¡¹å‡é€šè¿‡** âœ…

1. âœ… Git æäº¤ç‰ˆæœ¬æ­£ç¡®ï¼ˆ1.0.3, versionCode: 3ï¼‰
2. âœ… æ„å»ºç‰ˆæœ¬æ­£ç¡®ï¼ˆ1.0.3, versionCode: 3ï¼‰
3. âœ… æ‰€æœ‰å…³é”®ä»£ç å·²æäº¤
4. âœ… EAS é…ç½®æ­£ç¡®
5. âœ… ç¯å¢ƒå˜é‡é…ç½®æ­£ç¡®
6. âœ… è¯Šæ–­æ—¥å¿—å…¨éƒ¨åŒ…å«

**æœ¬æ¬¡æ„å»ºåº”è¯¥åŒ…å«æ‰€æœ‰ä¿®å¤ï¼Œå¯ä»¥æ­£å¸¸æµ‹è¯•ã€‚**

