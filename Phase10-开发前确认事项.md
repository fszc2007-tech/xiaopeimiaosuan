# Phase 10 开发前确认事项

**任务**: 开发 3 个辅助页面（意见反馈、邀请好友、我的解读）

---

## 📋 设计文档检查完成

已全面阅读以下文档：
- ✅ `我的-二级-意见反馈和客服设计文档.md`（589行）
- ✅ `我的-二级-邀请好友和设置设计文档.md`（545行）
- ✅ `我的-二级-内容查看页面设计文档.md`（587行）

---

## ❓ 需要您确认的问题

### 问题 1: 联系客服入口位置 ⚠️

**设计文档说明**:
- 意见反馈文档（2.1节）提到："从「我的」主页点击「联系客服」"
- 联系客服弹窗（Bottom Sheet）包含微信号复制和跳转功能

**现状**:
- 当前 `MeScreen.tsx` 中**没有**"联系客服"入口
- 只有"意见反馈"入口

**问题**:
- 是否需要在 MeScreen 中添加"联系客服" Cell？
- 还是将联系客服功能整合到意见反馈页面中？

**建议方案**:
- **方案 A**: 在 MeScreen"工具与帮助"分组中添加"联系客服" Cell
- **方案 B**: 在意见反馈页面底部添加"联系客服"按钮
- **方案 C**: 同时实现 A 和 B

**您的选择**: ____

---

### 问题 2: Core API 实现状态 ⚠️

**需要的 API 接口**:

| API | 用途 | Core 状态 |
|-----|------|----------|
| `POST /api/feedback` | 提交反馈 | ❓ 未知 |
| `GET /api/invite/code` | 获取邀请码 | ❓ 未知 |
| `POST /api/invite/poster` | 生成邀请海报 | ❓ 未知 |
| `GET /api/settings` | 获取设置 | ❓ 未知 |
| `PUT /api/settings` | 更新设置 | ❓ 未知 |
| `GET /api/reading/list` | 获取解读列表 | ❓ 未知 |
| `GET /api/chat/history` | 获取聊天记录 | ❓ 未知 |
| `DELETE /api/chat/history/:id` | 删除聊天记录 | ❓ 未知 |

**问题**:
1. 这些 API 是否已在 Core 后端实现？
2. 如果未实现，是使用模拟数据，还是先开发 Core API？

**建议方案**:
- **方案 A**: 所有页面先使用模拟数据，Core API 后续补充（✅ 推荐，快速迭代）
- **方案 B**: 先开发 Core API，再开发前端（⏱️ 时间较长）
- **方案 C**: 部分使用模拟数据，部分使用真实 API（混合方案）

**您的选择**: ____

---

### 问题 3: 设置页面二级页面范围 ⚠️

**设计文档中的设置页二级页面**:
1. 命理规则设置（`/settings/bazi-rules`）
2. 账号与安全（`/settings/account-security`）
3. 数据与隐私（`/settings/privacy`）
4. 关于小佩（`/settings/about`）

**问题**:
- Phase 10 是否需要实现这 4 个二级页面？
- 还是只实现设置主页，这些页面作为预留功能？

**建议方案**:
- **方案 A**: 只实现设置主页，二级页面显示"开发中"提示（✅ 推荐）
- **方案 B**: 实现所有二级页面（⏱️ 工作量大，预计 +6-8 小时）
- **方案 C**: 只实现"关于小佩"页面，其他预留

**您的选择**: ____

---

### 问题 4: 我的解读页 - 数据来源 ⚠️

**设计文档说明**:
- 展示用户的"命理分析卡"和"重要解读"
- 按主题分类：财富、事业、婚姻、健康等

**问题**:
1. 这些"解读"数据是如何生成的？
   - 是从聊天对话中自动提取？
   - 还是用户手动保存？
   - 还是某些特定功能生成（如"一键解读"）？

2. 数据存储在哪里？
   - 独立的 `readings` 表？
   - 还是从 `conversations` 表中查询？

**建议方案**:
- **方案 A**: 使用模拟数据，展示页面结构，数据逻辑后续补充（✅ 推荐）
- **方案 B**: 明确数据来源后再开发（需要您提供更多信息）

**您的选择**: ____

---

### 问题 5: 聊天记录页 - 左滑删除实现 ⚠️

**设计文档要求**:
- 支持左滑删除（iOS 风格，推荐）
- 或长按删除（Android 风格，备选）

**技术实现**:
React Native 实现左滑删除需要使用第三方库：
- `react-native-swipeable` - 简单，但不再维护
- `react-native-gesture-handler` + `react-native-reanimated` - 推荐，性能好
- `@react-native-community/swipeable-list` - 专门用于左滑删除

**问题**:
- 是否可以引入新的依赖库（如 `react-native-gesture-handler`）？
- 还是先实现长按删除，左滑删除作为后续优化？

**建议方案**:
- **方案 A**: 先实现长按删除，简单快速（✅ 推荐，0 新依赖）
- **方案 B**: 引入 `react-native-gesture-handler`，实现左滑删除（⏱️ 需要配置原生库）

**您的选择**: ____

---

### 问题 6: 邀请好友页 - 生成海报功能 ⚠️

**设计文档说明**:
- 生成邀请海报按钮（标记为"可选"）
- API: `POST /api/invite/poster`

**问题**:
- Phase 10 是否需要实现海报生成功能？
- 还是只实现邀请码复制，海报功能后续补充？

**建议方案**:
- **方案 A**: 不实现海报功能，按钮显示"敬请期待"（✅ 推荐）
- **方案 B**: 实现海报生成（⏱️ 需要图片生成库，预计 +3-4 小时）

**您的选择**: ____

---

### 问题 7: 设置页 - 现有 SettingsScreen 状态 ⚠️

**现状**:
- 已存在 `app/src/screens/Settings/SettingsScreen.tsx`（303行）
- 已包含部分设置功能

**问题**:
- 是否需要重构现有 SettingsScreen，使其 100% 符合设计文档？
- 还是保留现有实现，只做必要调整？

**建议方案**:
- **方案 A**: 检查现有实现，如符合设计文档 >80%，只做调整（✅ 推荐）
- **方案 B**: 完全重构，100% 符合设计文档（⏱️ 工作量大）

**您的选择**: ____

---

## 📝 您的决策汇总

请回复以下内容：

```
问题1: [ ] A / [ ] B / [ ] C
问题2: [ ] A / [ ] B / [ ] C
问题3: [ ] A / [ ] B / [ ] C
问题4: [ ] A / [ ] B
问题5: [ ] A / [ ] B
问题6: [ ] A / [ ] B
问题7: [ ] A / [ ] B
```

**或者，如果您同意所有推荐方案（✅标记），直接回复"同意推荐方案"即可。**

---

## 🎯 推荐方案总结

如果您同意所有推荐方案，Phase 10 将实现：

### ✅ 意见反馈页（P1）
- Tab 切换（使用建议/遇到问题）
- 文本输入 + 联系方式 + 开关选项
- 提交功能（使用模拟 API）
- 感谢页弹窗
- ✅ 在 MeScreen 添加"联系客服" Cell
- ✅ 联系客服 Bottom Sheet（微信号复制）

### ✅ 邀请好友页（P2）
- 邀请码展示
- 复制邀请码功能
- 邀请统计（使用模拟数据）
- ❌ 不实现海报生成（显示"敬请期待"）

### ✅ 我的解读页（P2）
- 解读列表展示
- 按主题筛选
- 空状态提示
- 使用模拟数据

### ✅ 设置页（已存在，检查+调整）
- 检查现有实现是否符合设计文档
- 必要时调整以符合规范
- 二级页面显示"开发中"提示

### ✅ 聊天记录页（已存在，调整）
- 检查现有实现
- 实现长按删除（不实现左滑删除）
- 调整为符合设计文档

---

**预计总工作量（推荐方案）**: 6-8 小时

**等待您的确认！** ✋

