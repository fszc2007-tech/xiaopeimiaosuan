# æ ¹æœ¬åŸå› ä¸ä¿®å¤æ–¹æ¡ˆ

## ğŸ” æ ¹æœ¬åŸå› ç¡®è®¤

**é—®é¢˜**ï¼šæ‰€æœ‰ä»£ç ä¿®æ”¹éƒ½**æœªæäº¤åˆ° Git**ï¼ŒEAS Build ä½¿ç”¨çš„æ˜¯ Git æäº¤çš„ä»£ç ï¼Œè€Œä¸æ˜¯å·¥ä½œåŒºçš„æœªæäº¤ä¿®æ”¹ã€‚

**è¯æ®**ï¼š
```bash
git status --short
 M app/src/components/auth/GoogleLoginSheet.tsx
 M app/src/config/env.ts
 M app/src/screens/Auth/PolicyViewerScreen.tsx
 M app/src/services/api/authService.ts
 ... (å…± 8 ä¸ªæ–‡ä»¶æœªæäº¤)
```

**ç»Ÿè®¡**ï¼š
- 8 ä¸ªæ–‡ä»¶ä¿®æ”¹
- 162 è¡Œæ–°å¢ï¼Œ42 è¡Œåˆ é™¤
- **å…¨éƒ¨æœªæäº¤åˆ° Git**

---

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1ï¼šæäº¤ä»£ç åˆ° Gitï¼ˆæ¨èï¼‰

```bash
cd /Users/gaoxuxu/Desktop/xiaopei-app

# 1. æ·»åŠ æ‰€æœ‰ä¿®æ”¹çš„æ–‡ä»¶
git add app/src/

# 2. æäº¤ä¿®æ”¹
git commit -m "fix: ä¿®å¤ç”¨æˆ·åè®®PDFåŠ è½½ã€çŸ­ä¿¡å‚æ•°ã€Googleç™»å½•å’Œåä¸ºMate40é€‚é…"

# 3. é‡æ–°æ„å»ºï¼ˆä½¿ç”¨ --clear-cacheï¼‰
cd app
eas build --platform android --profile production --clear-cache --non-interactive
```

### æ–¹æ¡ˆ 2ï¼šä½¿ç”¨ --local æ ‡å¿—ï¼ˆå®éªŒæ€§ï¼Œä¸æ¨èï¼‰

```bash
cd /Users/gaoxuxu/Desktop/xiaopei-app/app
eas build --platform android --profile production --local --clear-cache
```

**æ³¨æ„**ï¼š`--local` æ˜¯å®éªŒæ€§åŠŸèƒ½ï¼Œå¯èƒ½ä¸ç¨³å®šã€‚

---

## ğŸ“‹ éœ€è¦æäº¤çš„æ–‡ä»¶æ¸…å•

ä»¥ä¸‹æ–‡ä»¶éœ€è¦æäº¤ï¼š

1. âœ… `app/src/screens/Auth/PolicyViewerScreen.tsx` - PDF åŠ è½½ä¿®å¤
2. âœ… `app/src/components/auth/GoogleLoginSheet.tsx` - åä¸º Mate 40 é€‚é…
3. âœ… `app/src/components/auth/GoogleSignInButton.tsx` - Google ç™»å½•è¯Šæ–­
4. âœ… `app/src/config/env.ts` - ç¯å¢ƒå˜é‡è¯Šæ–­
5. âœ… `app/src/config/google.ts` - Google é…ç½®è¯Šæ–­
6. âœ… `app/src/services/api/apiClient.ts` - API å®¢æˆ·ç«¯è¯Šæ–­
7. âœ… `app/src/services/api/authService.ts` - çŸ­ä¿¡è¯·æ±‚è¯Šæ–­
8. âœ… `app/src/types/user.ts` - ç±»å‹å®šä¹‰ä¿®å¤
9. âœ… `app/app.json` - ç‰ˆæœ¬å·æ›´æ–°

---

## ğŸš€ ç«‹å³æ‰§è¡Œ

### æ­¥éª¤ 1ï¼šæäº¤ä»£ç 

```bash
cd /Users/gaoxuxu/Desktop/xiaopei-app

# æ·»åŠ ä¿®æ”¹çš„æ–‡ä»¶
git add app/src/ app/app.json

# æäº¤
git commit -m "fix: ä¿®å¤ç”Ÿäº§ç¯å¢ƒé—®é¢˜

- ä¿®å¤ç”¨æˆ·åè®®PDFåŠ è½½ï¼ˆç›´æ¥ä½¿ç”¨PDF URLï¼Œä¸ä½¿ç”¨Google Docs Viewerï¼‰
- ä¿®å¤çŸ­ä¿¡è¯·æ±‚å‚æ•°ï¼ˆæ·»åŠ regionå’ŒcountryCodeæ”¯æŒï¼‰
- æ·»åŠ Googleç™»å½•è¯Šæ–­æ—¥å¿—
- ä¿®å¤åä¸ºMate40é€‚é…ï¼ˆSafeAreaViewå’ŒåŠ¨æ€é«˜åº¦ï¼‰
- æ·»åŠ ç¯å¢ƒå˜é‡è¯Šæ–­æ—¥å¿—
- æ›´æ–°ç‰ˆæœ¬å·åˆ°1.0.3"
```

### æ­¥éª¤ 2ï¼šé‡æ–°æ„å»º

```bash
cd app
eas build --platform android --profile production --clear-cache --non-interactive
```

---

## âš ï¸ é‡è¦è¯´æ˜

**ä¸ºä»€ä¹ˆå¿…é¡»æäº¤ä»£ç **ï¼š
- EAS Build é»˜è®¤ä½¿ç”¨ Git æäº¤çš„ä»£ç 
- æœªæäº¤çš„ä¿®æ”¹ä¸ä¼šåŒ…å«åœ¨æ„å»ºä¸­
- å³ä½¿æ›´æ–°ç‰ˆæœ¬å·æˆ–ä½¿ç”¨ `--clear-cache`ï¼Œä¹Ÿä¸ä¼šåŒ…å«æœªæäº¤çš„ä¿®æ”¹

**éªŒè¯æ–¹æ³•**ï¼š
æ„å»ºå®Œæˆåï¼Œæ£€æŸ¥æ„å»ºæ—¥å¿—ä¸­æ˜¯å¦åŒ…å«ï¼š
- "Compressing project files" - ç¡®è®¤æ–‡ä»¶è¢«å‹ç¼©
- æ–‡ä»¶å¤§å°åº”è¯¥åŒ…å«æ‰€æœ‰ä¿®æ”¹ï¼ˆ162 è¡Œæ–°å¢ï¼‰

---

## ğŸ“ æäº¤åçš„éªŒè¯

æäº¤å¹¶æ„å»ºåï¼ŒéªŒè¯ï¼š

1. **æ£€æŸ¥ Git æäº¤**ï¼š
   ```bash
   git log --oneline -1
   ```

2. **æ£€æŸ¥æ„å»ºæ—¥å¿—**ï¼š
   - ç¡®è®¤æ–‡ä»¶è¢«ä¸Šä¼ 
   - ç¡®è®¤æ–‡ä»¶å¤§å°åˆç†

3. **æµ‹è¯• APK**ï¼š
   - ç¯å¢ƒå˜é‡è¯Šæ–­æ—¥å¿—
   - ç”¨æˆ·åè®®åŠ è½½
   - çŸ­ä¿¡å‘é€
   - Google ç™»å½•
   - åä¸º Mate 40 é€‚é…

