# Admin åå°å¼€å‘éœ€æ±‚ç¡®è®¤

**æ—¥æœŸ**: 2024-11-18  
**ä»»åŠ¡**: å®Œæ•´å®ç° Admin åå°å‰ç«¯ï¼ˆæ–¹æ¡ˆ Bï¼‰

---

## ğŸ“‹ éœ€æ±‚ç†è§£ï¼ˆä»æ–‡æ¡£ä¸­æå–ï¼‰

### 1ï¸âƒ£ **æŠ€æœ¯æ ˆä¸æ¶æ„**
- **å‰ç«¯æ¡†æ¶**: React 19 + TypeScript + Vite
- **è·¯ç”±ç®¡ç†**: React Routerï¼ˆéœ€è¦å®‰è£…ï¼‰
- **API é€šä¿¡**: 
  - åŸºç¡€ URL: `http://localhost:3000`ï¼ˆé€šè¿‡ .env é…ç½®ï¼‰
  - è·¯å¾„å‰ç¼€: `/api/admin/v1/`
  - å“åº”æ ¼å¼: `{ success: boolean, data?: T, error?: {...} }`

### 2ï¸âƒ£ **æ ¸å¿ƒåŠŸèƒ½ï¼ˆv1.0 æœ€å°éœ€æ±‚ï¼‰**

#### A. Admin è®¤è¯
- **ç™»å½•é¡µé¢**ï¼ˆç”¨æˆ·å/å¯†ç ï¼‰
- **ç™»å½•æ¥å£**: `POST /api/admin/v1/auth/login`
- **è¯·æ±‚ä½“**: `{ username, password }`
- **å“åº”**: `{ token, admin: { adminId, username, role } }`
- **é»˜è®¤è´¦å·**: `admin / admin123`ï¼ˆå¼€å‘ç¯å¢ƒï¼‰

#### B. ç”¨æˆ·ç®¡ç†ï¼ˆ4ä¸ªå­åŠŸèƒ½ï¼‰
1. **ç”¨æˆ·åˆ—è¡¨** (`GET /api/admin/v1/users`)
   - è¡¨æ ¼æ˜¾ç¤ºï¼šç”¨æˆ·IDã€æ‰‹æœºå·/é‚®ç®±ã€æ˜µç§°ã€æ³¨å†Œæ—¶é—´ã€æœ€åç™»å½•ã€ProçŠ¶æ€
   - åŠŸèƒ½ï¼šæœç´¢ã€ç­›é€‰ï¼ˆPro/æ™®é€šï¼‰ã€åˆ†é¡µã€æ’åº

2. **ç”¨æˆ·è¯¦æƒ…** (`GET /api/admin/v1/users/:userId`)
   - åŸºæœ¬ä¿¡æ¯ã€è®¢é˜…ä¿¡æ¯ã€å‘½ç›˜æ¡£æ¡ˆã€ä½¿ç”¨ç»Ÿè®¡

3. **åˆ›å»ºæµ‹è¯•ç”¨æˆ·** (`POST /api/admin/v1/users/test`)
   - è¡¨å•ï¼šæ‰‹æœºå·/é‚®ç®±ã€å¯†ç ã€æ˜µç§°ã€åº”ç”¨åŒºåŸŸã€æ˜¯å¦Pro

4. **Cursor æµ‹è¯•è´¦å·** (`GET /api/admin/v1/users/cursor/test-account`)
   - å›ºå®šè´¦å·ï¼š`cursor_test@xiaopei.com`
   - è‡ªåŠ¨ç”Ÿæˆå¯†ç ï¼Œå¯é‡ç½®

#### C. LLM é…ç½®ï¼ˆ3ä¸ªæ¨¡å‹ï¼‰
- **DeepSeek** / **ChatGPT** / **Qwen**
- æ¯ä¸ªæ¨¡å‹é…ç½®ï¼š
  - API Keyï¼ˆåŠ å¯†å­˜å‚¨ï¼Œæ˜¾ç¤ºæ©ç ï¼‰
  - Base URLï¼ˆå¯é€‰ï¼‰
  - æ¨¡å‹åç§°ï¼ˆå¯é€‰ï¼‰
  - å¯ç”¨æµå¼å“åº”ï¼ˆå¼€å…³ï¼‰
  - **å¯ç”¨æ€è€ƒæ¨¡å¼**ï¼ˆå¼€å…³ï¼ŒDeepSeek ä¸“ç”¨ï¼‰
  - Temperatureã€Max Tokens
  - æµ‹è¯•è¿æ¥æŒ‰é’®
- **API æ¥å£**:
  - è·å–æ‰€æœ‰é…ç½®: `GET /api/admin/v1/llm-config`
  - æ›´æ–°é…ç½®: `PUT /api/admin/v1/llm-config/:provider`
  - æµ‹è¯•è¿æ¥: `POST /api/admin/v1/llm-config/:provider/test`

### 3ï¸âƒ£ **å®‰å…¨è¦æ±‚**
- âœ… API Key åŠ å¯†å­˜å‚¨ï¼ˆåç«¯å·²å®ç° AES-256-GCMï¼‰
- âœ… å‰ç«¯åªæ˜¾ç¤ºæ©ç ï¼ˆ`************abcd`ï¼‰
- âœ… JWT Token è®¤è¯ï¼ˆæ‰€æœ‰è¯·æ±‚éœ€è¦ `Authorization: Bearer <token>`ï¼‰
- âœ… æŸ¥çœ‹å®Œæ•´ API Key éœ€è¦äºŒæ¬¡éªŒè¯ï¼ˆç®¡ç†å‘˜å¯†ç ï¼‰

### 4ï¸âƒ£ **å¼€å‘ä¼˜å…ˆçº§ï¼ˆP0ï¼‰**
âœ… P0ï¼ˆå¿…é¡»å®ç°ï¼‰:
1. Admin ç™»å½•é¡µé¢
2. ç”¨æˆ·åˆ—è¡¨ä¸è¯¦æƒ…
3. åˆ›å»ºæµ‹è¯•ç”¨æˆ·
4. Cursor æµ‹è¯•è´¦å·
5. LLM é…ç½®ï¼ˆä¸‰ä¸ªæ¨¡å‹ï¼‰
6. è·¯ç”±ä¸å¯¼èˆª

---

## â“ éœ€è¦ç¡®è®¤çš„é—®é¢˜

### é—®é¢˜ 1: API è·¯å¾„å‰ç¼€å†²çª ğŸ”´
- **æ–‡æ¡£ A**ï¼ˆAdminåå°æœ€å°éœ€æ±‚åŠŸèƒ½æ–‡æ¡£.mdï¼‰:
  - è·¯å¾„å‰ç¼€: `/api/admin/users`
  - ç¤ºä¾‹: `GET /api/admin/users`
  
- **æ–‡æ¡£ B**ï¼ˆcore/å¼€å‘å®Œæˆ-Phase4.md + core ä»£ç ï¼‰:
  - è·¯å¾„å‰ç¼€: `/api/admin/v1/`
  - ç¤ºä¾‹: `GET /api/admin/v1/users`

**â“ è¯·ç¡®è®¤**: Admin API çš„æ­£ç¡®è·¯å¾„å‰ç¼€æ˜¯ä»€ä¹ˆï¼Ÿ
- [ ] `/api/admin/` ï¼ˆæ–‡æ¡£ Aï¼‰
- [ ] `/api/admin/v1/` ï¼ˆæ–‡æ¡£ B + Core ä»£ç å®ç°ï¼‰

---

### é—®é¢˜ 2: UI ç»„ä»¶åº“é€‰æ‹© ğŸŸ¡
**æ–‡æ¡£æœªæ˜ç¡®è¯´æ˜**ï¼Œéœ€è¦é€‰æ‹©ï¼š

é€‰é¡¹ A: ä½¿ç”¨æˆç†Ÿ UI ç»„ä»¶åº“
- **Ant Design** (æ¨è): ä¼ä¸šçº§ã€ç»„ä»¶ä¸°å¯Œã€é€‚åˆ Admin åå°
- Material-UI: Google é£æ ¼
- Chakra UI: è½»é‡çº§

é€‰é¡¹ B: ä½¿ç”¨ Tailwind CSS + æ‰‹å†™ç»„ä»¶
- çµæ´»æ€§é«˜ï¼Œä½†å¼€å‘æ—¶é—´é•¿

**â“ è¯·é€‰æ‹©**: 
- [ ] Ant Designï¼ˆæ¨èï¼Œå¿«é€Ÿå¼€å‘ï¼‰
- [ ] Tailwind CSS + æ‰‹å†™
- [ ] å…¶ä»–: ___________

---

### é—®é¢˜ 3: çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ ğŸŸ¡
**æ–‡æ¡£æœªæ˜ç¡®è¯´æ˜**ï¼Œéœ€è¦é€‰æ‹©ï¼š

é€‰é¡¹ A: ä½¿ç”¨çŠ¶æ€ç®¡ç†åº“
- Redux Toolkit
- Zustandï¼ˆè½»é‡ï¼‰
- Context APIï¼ˆç®€å•åœºæ™¯ï¼‰

é€‰é¡¹ B: ä¸ç”¨çŠ¶æ€ç®¡ç†
- ä»…ä½¿ç”¨ React æœ¬åœ° state + Props

**â“ è¯·é€‰æ‹©**: 
- [ ] Context APIï¼ˆæ¨èï¼Œè½»é‡å¤Ÿç”¨ï¼‰
- [ ] Zustandï¼ˆä¸­ç­‰å¤æ‚åº¦ï¼‰
- [ ] ä¸ä½¿ç”¨çŠ¶æ€ç®¡ç†ï¼ˆæœ€ç®€å•ï¼‰
- [ ] å…¶ä»–: ___________

---

### é—®é¢˜ 4: é¡µé¢è·¯ç”±ç»“æ„ ğŸŸ¢
**å»ºè®®æ–¹æ¡ˆ**ï¼ˆåŸºäºæ–‡æ¡£ï¼‰:

```
/login           â†’ ç™»å½•é¡µï¼ˆå…¬å¼€ï¼‰
/                â†’ é‡å®šå‘åˆ° /users æˆ– /dashboard
/users           â†’ ç”¨æˆ·åˆ—è¡¨
/users/:id       â†’ ç”¨æˆ·è¯¦æƒ…
/users/create    â†’ åˆ›å»ºæµ‹è¯•ç”¨æˆ·
/users/cursor    â†’ Cursor æµ‹è¯•è´¦å·
/llm-config      â†’ LLM é…ç½®
```

**â“ æ˜¯å¦åŒæ„**æ­¤è·¯ç”±ç»“æ„ï¼Ÿ
- [ ] åŒæ„
- [ ] éœ€è¦è°ƒæ•´: ___________

---

### é—®é¢˜ 5: å¼€å‘ç¯å¢ƒé»˜è®¤è´¦å· ğŸŸ¢
**æ–‡æ¡£è§„å®š**:
- ç”¨æˆ·å: `admin`
- å¯†ç : `admin123`

**â“ ç¡®è®¤**: æ˜¯å¦æŒ‰æ­¤é…ç½®ï¼Ÿ
- [ ] æ˜¯ï¼ˆæ¨èï¼‰
- [ ] éœ€è¦ä¿®æ”¹: ___________

---

## ğŸ“¦ éœ€è¦å®‰è£…çš„ä¾èµ–

æ ¹æ®éœ€æ±‚ï¼Œéœ€è¦å®‰è£…ï¼š

```bash
# å¿…é¡»å®‰è£…
npm install react-router-dom axios

# UI ç»„ä»¶åº“ï¼ˆå¾…ç¡®è®¤ï¼‰
npm install antd  # å¦‚æœé€‰æ‹© Ant Design
# æˆ–
npm install -D tailwindcss  # å¦‚æœé€‰æ‹© Tailwind CSS

# å¯é€‰ï¼ˆæ ¹æ®çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼‰
npm install zustand  # å¦‚æœé€‰æ‹© Zustand
```

---

## âœ… å¼€å‘è®¡åˆ’ï¼ˆæ–¹æ¡ˆ B - å®Œæ•´å®ç°ï¼‰

### Phase 1: åŸºç¡€è®¾æ–½ï¼ˆ30åˆ†é’Ÿï¼‰
1. âœ… å®‰è£…ä¾èµ–
2. âœ… åˆ›å»º `.env` æ–‡ä»¶
3. âœ… å®ç° API æœåŠ¡å±‚ (`services/api.ts`)
4. âœ… é…ç½®è·¯ç”± (`App.tsx`)
5. âœ… å®ç° AuthContextï¼ˆå¦‚æœéœ€è¦ï¼‰

### Phase 2: ç™»å½•åŠŸèƒ½ï¼ˆ20åˆ†é’Ÿï¼‰
1. âœ… ç™»å½•é¡µé¢ç»„ä»¶ (`pages/Login/LoginPage.tsx`)
2. âœ… è¡¨å•éªŒè¯
3. âœ… Token å­˜å‚¨ï¼ˆlocalStorageï¼‰
4. âœ… å—ä¿æŠ¤è·¯ç”±ï¼ˆProtectedRouteï¼‰

### Phase 3: ç”¨æˆ·ç®¡ç†ï¼ˆ60åˆ†é’Ÿï¼‰
1. âœ… ç”¨æˆ·åˆ—è¡¨é¡µé¢ (`pages/Users/UserList.tsx`)
2. âœ… ç”¨æˆ·è¯¦æƒ…é¡µé¢ (`pages/Users/UserDetail.tsx`)
3. âœ… åˆ›å»ºæµ‹è¯•ç”¨æˆ·é¡µé¢ (`pages/Users/CreateTestUser.tsx`)
4. âœ… Cursor æµ‹è¯•è´¦å·é¡µé¢ (`pages/Users/CursorTestAccount.tsx`)

### Phase 4: LLM é…ç½®ï¼ˆ40åˆ†é’Ÿï¼‰
1. âœ… LLM é…ç½®é¡µé¢ (`pages/LLMConfig/LLMConfigPage.tsx`)
2. âœ… é…ç½®å¡ç‰‡ç»„ä»¶ï¼ˆ3ä¸ªæ¨¡å‹ï¼‰
3. âœ… æµ‹è¯•è¿æ¥åŠŸèƒ½
4. âœ… API Key æ˜¾ç¤º/éšè—

### Phase 5: å¯¼èˆªä¸å¸ƒå±€ï¼ˆ20åˆ†é’Ÿï¼‰
1. âœ… é¡¶éƒ¨å¯¼èˆªæ 
2. âœ… ä¾§è¾¹èœå•
3. âœ… é€€å‡ºç™»å½•

**æ€»è®¡é¢„ä¼°æ—¶é—´**: ~2.5 å°æ—¶

---

## ğŸ¯ å¾…ç”¨æˆ·ç¡®è®¤

è¯·æ‚¨ç¡®è®¤ä»¥ä¸‹å†…å®¹ï¼š

1. âœ… **API è·¯å¾„å‰ç¼€**: `/api/admin/v1/` è¿˜æ˜¯ `/api/admin/`ï¼Ÿ
2. âœ… **UI ç»„ä»¶åº“**: Ant Design / Tailwind CSS / å…¶ä»–ï¼Ÿ
3. âœ… **çŠ¶æ€ç®¡ç†**: Context API / Zustand / ä¸ä½¿ç”¨ï¼Ÿ
4. âœ… **è·¯ç”±ç»“æ„**: æ˜¯å¦åŒæ„å»ºè®®æ–¹æ¡ˆï¼Ÿ
5. âœ… **é»˜è®¤è´¦å·**: admin/admin123 æ˜¯å¦ OKï¼Ÿ

**ç¡®è®¤åæˆ‘å°†ç«‹å³å¼€å§‹å®æ–½ï¼** ğŸš€

---

**æ–‡æ¡£ç”Ÿæˆæ—¶é—´**: 2024-11-18  
**æ–‡æ¡£ç”Ÿæˆè€…**: Cursor AI Assistant

