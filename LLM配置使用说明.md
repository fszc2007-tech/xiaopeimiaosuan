# LLM 配置使用说明

## 🚀 如何启用/禁用 LLM

### 方法 1：使用启用开关（推荐）

1. 进入 **Admin 后台** → **LLM 配置**
2. 找到要启用的模型卡片（如 DeepSeek）
3. 在表单中找到 **"启用状态"** 的 Switch 开关
4. **向右拨动** → 启用（蓝色）
5. **向左拨动** → 禁用（灰色）
6. 点击 **"保存配置"** 按钮

**注意**：如果该模型还没有配置 API Key，**必须先输入 API Key**，否则无法启用。

---

### 方法 2：配置 API Key 后自动启用

1. 输入 **API Key**
2. 设置其他参数（温度、Token 长度等）
3. **打开启用开关**
4. 点击 **"保存配置"**

系统会：
- 加密存储 API Key
- 将状态设置为 "已启用"
- 更新配置到数据库

---

## 🎯 状态说明

| 状态标签 | 含义 | 操作建议 |
|---------|------|---------|
| 🟢 **已启用** | 已配置 API Key 且已启用 | 可以直接使用 |
| 🟡 **未配置 API Key** | 已启用但缺少 API Key | 需要先输入 API Key |
| ⚪ **未启用** | 开关处于关闭状态 | 打开启用开关并保存 |

---

## 📝 完整配置流程

### Step 1: 输入 API Key
```
┌─────────────────────────┐
│ API Key                 │
│ ┌─────────────────────┐ │
│ │ sk-xxx...          │ │
│ └─────────────────────┘ │
│ 当前: ********821a      │
└─────────────────────────┘
```

### Step 2: 调整参数
```
┌─────────────────────────┐
│ 温度 (Temperature)      │
│ ┌─────────────────────┐ │
│ │ 0.7                │ │ ← 0 ~ 1
│ └─────────────────────┘ │
└─────────────────────────┘

┌─────────────────────────┐
│ 最大 Token 长度         │
│ ┌─────────────────────┐ │
│ │ 2000               │ │ ← 1 ~ 32000
│ └─────────────────────┘ │
└─────────────────────────┘
```

### Step 3: 启用开关
```
┌─────────────────────────┐
│ 启用状态                │
│ ┌──────┐  ┌──────┐     │
│ │ 启用 │  │ 禁用 │ ←──│  拨动开关
│ └──────┘  └──────┘     │
│    🔵         ⚪        │
└─────────────────────────┘
```

### Step 4: 保存配置
```
┌─────────────────────────┐
│ [保存配置]  [测试连接]  │ ← 点击保存
└─────────────────────────┘
```

### Step 5: 测试连接（可选）
```
点击 [测试连接] 按钮
↓
系统发送测试请求到 LLM API
↓
显示结果：
✅ "连接成功，延迟 235ms"
或
❌ "API Key 无效或已过期"
```

---

## 🔧 字段说明

### 必填字段

| 字段 | 类型 | 说明 |
|-----|------|------|
| **API Key** | 密码 | LLM 服务商提供的密钥 |
| **温度** | 数字 | 控制随机性，0=确定性，1=随机性高 |
| **Token 长度** | 数字 | 单次响应的最大字符数 |

### 可选字段

| 字段 | 适用模型 | 说明 |
|-----|---------|------|
| **思考模式** | DeepSeek | 启用后显示推理过程 |

---

## ⚙️ 推荐配置

### DeepSeek（推荐用于复杂推理）
```
API Key: sk-xxx...
温度: 0.7
Token 长度: 4000
思考模式: ✅ 开启
启用状态: ✅ 启用
```

### ChatGPT（推荐用于通用对话）
```
API Key: sk-xxx...
温度: 0.8
Token 长度: 2000
启用状态: ✅ 启用
```

### Qwen（推荐用于中文场景）
```
API Key: sk-xxx...
温度: 0.7
Token 长度: 2000
启用状态: ✅ 启用
```

---

## ❓ 常见问题

### Q1: 为什么无法启用？
**A**: 检查是否已输入 API Key。系统要求必须先配置 API Key 才能启用。

### Q2: 保存后状态没有变化？
**A**: 
1. 检查浏览器控制台是否有错误
2. 强制刷新浏览器（Ctrl/Cmd + Shift + R）
3. 确认后端服务正常运行（`http://localhost:3000/health`）

### Q3: 测试连接失败怎么办？
**A**: 
- **401 错误**：API Key 无效，检查密钥是否正确
- **网络错误**：检查后端服务是否运行
- **超时**：网络不稳定或 API 服务商响应慢

### Q4: 如何查看当前启用的模型？
**A**: 查看卡片顶部的状态标签：
- 🟢 **已启用** = 正在使用
- ⚪ **未启用** = 未激活

---

## 🎯 快速操作指南

### 启用 DeepSeek
```bash
1. 输入 API Key
2. 温度设为 0.7
3. Token 设为 4000
4. 开启思考模式
5. 打开启用开关
6. 点击保存
```

### 禁用某个模型
```bash
1. 找到对应的模型卡片
2. 关闭启用开关（向左拨）
3. 点击保存
```

### 更换 API Key
```bash
1. 在 API Key 字段输入新密钥
2. 点击保存
3. 点击测试连接验证
```

---

**如有疑问，请联系管理员！** 🙋

