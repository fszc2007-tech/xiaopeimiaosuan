/**
 * 分析模块共享常量
 * 从 baziAnalysis.js 提取
 */

// 天干五行
export const STEM_ELEMENT = {
  '甲':'木', '乙':'木', '丙':'火', '丁':'火', '戊':'土', '己':'土',
  '庚':'金', '辛':'金', '壬':'水', '癸':'水'
};

// 天干阴阳
export const STEM_YIN_YANG = {
  '甲':'阳', '乙':'阴', '丙':'阳', '丁':'阴', '戊':'阳', '己':'阴',
  '庚':'阳', '辛':'阴', '壬':'阳', '癸':'阴'
};

// 天干阴阳（别名，兼容性）
export const STEM_YY = STEM_YIN_YANG;

// 地支五行（本气）
export const BRANCH_ELEMENT = {
  '子':'水', '丑':'土', '寅':'木', '卯':'木', '辰':'土', '巳':'火',
  '午':'火', '未':'土', '申':'金', '酉':'金', '戌':'土', '亥':'水'
};

// 地支藏干表（带权重）
export const HIDDEN_STEMS = {
  '子': [{stem:'癸', weight:1}],
  '丑': [{stem:'己', weight:0.6}, {stem:'癸', weight:0.2}, {stem:'辛', weight:0.2}],
  '寅': [{stem:'甲', weight:0.6}, {stem:'丙', weight:0.3}, {stem:'戊', weight:0.1}],
  '卯': [{stem:'乙', weight:1}],
  '辰': [{stem:'戊', weight:0.6}, {stem:'乙', weight:0.2}, {stem:'癸', weight:0.2}],
  '巳': [{stem:'丙', weight:0.6}, {stem:'庚', weight:0.2}, {stem:'戊', weight:0.2}],
  '午': [{stem:'丁', weight:0.7}, {stem:'己', weight:0.3}],
  '未': [{stem:'己', weight:0.6}, {stem:'乙', weight:0.2}, {stem:'丁', weight:0.2}],
  '申': [{stem:'庚', weight:0.6}, {stem:'壬', weight:0.3}, {stem:'戊', weight:0.1}],
  '酉': [{stem:'辛', weight:1}],
  '戌': [{stem:'戊', weight:0.6}, {stem:'辛', weight:0.2}, {stem:'丁', weight:0.2}],
  '亥': [{stem:'壬', weight:0.8}, {stem:'甲', weight:0.2}],
};

// 五行相生
export const GENERATES = { '木':'火', '火':'土', '土':'金', '金':'水', '水':'木' };

// 五行相克
export const CONTROLS = { '木':'土', '土':'水', '水':'火', '火':'金', '金':'木' };

// 生我者（印星）
export const MOTHER_OF = { '木':'水', '火':'木', '土':'火', '金':'土', '水':'金' };

// 克我者（官杀）
export const CONTROLLER_OF = { '木':'金', '火':'水', '土':'木', '金':'火', '水':'土' };

// 12运旺地加分（日支为旺地的情况）
export const ROOT_BRANCH_BONUS = {
  '木': { strong: ['寅','卯'], minor: ['亥'] },
  '火': { strong: ['巳','午'], minor: ['卯'] },
  '土': { strong: ['辰','戌','丑','未'], minor: [] },
  '金': { strong: ['申','酉'], minor: ['巳'] },
  '水': { strong: ['子','亥'], minor: ['申'] },
};

// 月令季节权重表（索引: 子丑寅卯辰巳午未申酉戌亥）
// 按元素在各月旺相休囚死归一化
export const MONTH_INDEX = { 
  '子':0,'丑':1,'寅':2,'卯':3,'辰':4,'巳':5,
  '午':6,'未':7,'申':8,'酉':9,'戌':10,'亥':11 
};

export const SEASON_WEIGHT = {
  '木': [0.2, 0.1, 0.9, 1.0, 0.6, 0.3, 0.2, 0.2, 0.3, 0.3, 0.2, 0.1],
  // 火：寅月木旺生火为"相"，权重应提升到0.65（原0.3偏低）
  '火': [0.1, 0.1, 0.65, 0.5, 0.8, 1.0, 1.0, 0.8, 0.4, 0.2, 0.1, 0.1],
  '土': [0.3, 0.6, 0.2, 0.2, 0.8, 0.3, 0.3, 0.8, 0.4, 0.3, 0.8, 0.3], // 月末土旺：辰未戌丑
  '金': [0.2, 0.2, 0.1, 0.1, 0.2, 0.2, 0.2, 0.3, 0.9, 1.0, 0.8, 0.5],
  '水': [1.0, 0.8, 0.3, 0.2, 0.2, 0.1, 0.1, 0.1, 0.3, 0.5, 0.8, 0.9],
};

