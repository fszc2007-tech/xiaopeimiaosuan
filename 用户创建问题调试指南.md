# ç”¨æˆ·åˆ›å»ºé—®é¢˜è°ƒè¯•æŒ‡å—

## é—®é¢˜ç°çŠ¶

- **å‰ç«¯æç¤º**ï¼šåˆ›å»ºç”¨æˆ·å¤±è´¥
- **åç«¯æµ‹è¯•**ï¼šâœ… API æ­£å¸¸ï¼ˆå·²æµ‹è¯•æˆåŠŸï¼‰
- **è­¦å‘Šä¿¡æ¯**ï¼š`Warning: [antd: Input] addonAfter is deprecated`

---

## åç«¯ API æµ‹è¯•ç»“æœ

âœ… **å·²éªŒè¯åç«¯æ­£å¸¸**ï¼š

```bash
curl -X POST "http://localhost:3000/api/admin/v1/users/test" \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "phone": "13900139001",
    "password": "test123456",
    "appRegion": "CN"
  }'

# è¿”å› 200 OK
{
  "success": true,
  "data": {
    "userId": "925f5789-387a-4a6c-836f-7a1d6a4d82ec",
    "phone": "13900139001",
    "appRegion": "cn",
    ...
  }
}
```

---

## é—®é¢˜æ’æŸ¥æ­¥éª¤

### 1ï¸âƒ£ æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

**æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰**ï¼š

#### Console é¢æ¿
- æŸ¥æ‰¾çº¢è‰²é”™è¯¯ä¿¡æ¯
- ç‰¹åˆ«æ³¨æ„ä»¥ä¸‹å…³é”®è¯ï¼š
  - `TypeError`
  - `Network Error`
  - `Uncaught`
  - `Failed to fetch`

#### Network é¢æ¿
- æ‰¾åˆ° `POST /api/admin/v1/users/test` è¯·æ±‚
- æ£€æŸ¥ä»¥ä¸‹ä¿¡æ¯ï¼š
  - **çŠ¶æ€ç **ï¼šåº”è¯¥æ˜¯ 200
  - **è¯·æ±‚å¤´**ï¼šæ˜¯å¦åŒ…å« `Authorization: Bearer ...`
  - **è¯·æ±‚ä½“**ï¼šJSON æ ¼å¼æ˜¯å¦æ­£ç¡®
  - **å“åº”ä½“**ï¼šè¿”å›çš„ JSON å†…å®¹

---

### 2ï¸âƒ£ è¡¨å•å¡«å†™è¦æ±‚

åç«¯**ä¸è¦æ±‚**æ‰‹æœºå·å’Œé‚®ç®±éƒ½å¡«å†™ï¼š

```typescript
// âœ… æœ‰æ•ˆçš„è¯·æ±‚
{
  "phone": "13800138000",     // å¯é€‰
  "email": "test@example.com", // å¯é€‰
  "password": "123456",        // å¿…å¡«
  "appRegion": "CN"            // å¿…å¡«
}
```

**æ³¨æ„**ï¼š
- `password` å¿…å¡«ï¼Œè‡³å°‘ 6 ä½
- `appRegion` å¿…å¡«ï¼Œå€¼ä¸º `CN` æˆ– `HK`
- `phone` å’Œ `email` è‡³å°‘å¡«ä¸€ä¸ªï¼ˆä½†åç«¯å®é™…ä¸Šå…è®¸éƒ½ä¸ºç©ºï¼‰

---

### 3ï¸âƒ£ Ant Design è­¦å‘Š

`Warning: [antd: Input] addonAfter is deprecated`

**åŸå› **ï¼š
- è¿™æ˜¯ Ant Design å†…éƒ¨çš„è­¦å‘Š
- ä¸å½±å“åŠŸèƒ½
- å¯ä»¥å¿½ç•¥

**å¦‚ä½•æ¶ˆé™¤**ï¼ˆå¯é€‰ï¼‰ï¼š
```bash
# å‡çº§åˆ°æœ€æ–°ç‰ˆ Ant Design
cd /Users/gaoxuxu/Desktop/å°ä½©APP/admin
npm update antd
```

---

## å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

### âŒ é”™è¯¯ 1ï¼š401 Unauthorized

**åŸå› **ï¼šæœªç™»å½•æˆ– Token è¿‡æœŸ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. é‡æ–°ç™»å½• Admin
2. æ£€æŸ¥ localStorage ä¸­çš„ `admin_token`

---

### âŒ é”™è¯¯ 2ï¼š400 PHONE_EXISTS

**åŸå› **ï¼šæ‰‹æœºå·å·²è¢«ä½¿ç”¨

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ›´æ¢æ‰‹æœºå·
- æˆ–è€…å…ˆåˆ é™¤å·²æœ‰ç”¨æˆ·

---

### âŒ é”™è¯¯ 3ï¼šNetwork Error / CORS

**åŸå› **ï¼šåç«¯æœªå¯åŠ¨æˆ– CORS é…ç½®é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥åç«¯æ˜¯å¦è¿è¡Œ
curl http://localhost:3000/health

# é‡å¯åç«¯
cd /Users/gaoxuxu/Desktop/å°ä½©APP/core
npm run dev
```

---

### âŒ é”™è¯¯ 4ï¼š500 Internal Server Error

**åŸå› **ï¼šåç«¯ä»£ç é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æŸ¥çœ‹åç«¯æ—¥å¿—
tail -50 /tmp/core-final2.log
```

---

## è¯·æä¾›ä»¥ä¸‹ä¿¡æ¯

ä¸ºäº†è¿›ä¸€æ­¥è¯Šæ–­é—®é¢˜ï¼Œè¯·æä¾›ï¼š

### ğŸ“‹ æ¸…å•

- [ ] **æµè§ˆå™¨æ§åˆ¶å°çš„å®Œæ•´é”™è¯¯ä¿¡æ¯**ï¼ˆæˆªå›¾æˆ–å¤åˆ¶æ–‡æœ¬ï¼‰
- [ ] **Network é¢æ¿ä¸­çš„è¯·æ±‚è¯¦æƒ…**ï¼š
  - è¯·æ±‚ URL
  - è¯·æ±‚å¤´ï¼ˆHeadersï¼‰
  - è¯·æ±‚ä½“ï¼ˆPayloadï¼‰
  - å“åº”çŠ¶æ€ç 
  - å“åº”ä½“ï¼ˆResponseï¼‰
- [ ] **æ‚¨å¡«å†™çš„è¡¨å•å†…å®¹**ï¼š
  - æ‰‹æœºå·ï¼š`_________`
  - é‚®ç®±ï¼š`_________`
  - å¯†ç ï¼š`_________`
  - åœ°åŒºï¼š`_________`

---

## ä¸´æ—¶æµ‹è¯•æ–¹æ¡ˆ

å¦‚æœå‰ç«¯æŒç»­å¤±è´¥ï¼Œå¯ä»¥å…ˆç”¨ **curl** åˆ›å»ºç”¨æˆ·ï¼š

```bash
# 1. è·å– Token
TOKEN=$(curl -s -X POST http://localhost:3000/api/admin/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}' | jq -r '.data.token')

# 2. åˆ›å»ºç”¨æˆ·
curl -X POST "http://localhost:3000/api/admin/v1/users/test" \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "phone": "13900139999",
    "password": "test123456",
    "appRegion": "CN"
  }' | jq

# 3. åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨
# http://localhost:5173/users
```

---

## å·²æ’é™¤çš„é—®é¢˜

- âœ… åç«¯ API æ­£å¸¸
- âœ… æ•°æ®åº“è¿æ¥æ­£å¸¸
- âœ… è·¯ç”±é…ç½®æ­£ç¡®
- âœ… å­—æ®µæ˜ å°„æ­£ç¡®ï¼ˆ`userId`ï¼‰

**ç»“è®º**ï¼šé—®é¢˜å¾ˆå¯èƒ½åœ¨**å‰ç«¯è¯·æ±‚æˆ–é”™è¯¯å¤„ç†é€»è¾‘**ä¸­ã€‚

---

**ä¸‹ä¸€æ­¥**ï¼šè¯·æä¾›ä¸Šè¿°æ¸…å•ä¸­çš„ä¿¡æ¯ï¼Œä»¥ä¾¿ç²¾ç¡®å®šä½é—®é¢˜ï¼ ğŸ”

